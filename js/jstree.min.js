  


<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>jstree/dist/jstree.min.js at master · vakata/jstree</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <link rel="logo" type="image/svg" href="http://github-media-downloads.s3.amazonaws.com/github-logo.svg" />
    <link rel="xhr-socket" href="/_sockets">
    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="S6Afz6WjpYNJ2IXGAJBiv0YK4AcAsax/jq48EJ3zF8U=" name="csrf-token" />

    <link href="https://a248.e.akamai.net/assets.github.com/assets/github-0822fd4736edb41e9e5a7455464a0779b3a3db14.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://a248.e.akamai.net/assets.github.com/assets/github2-8f91085a65ed893494cb6c0333b723dc357cff76.css" media="all" rel="stylesheet" type="text/css" />
    


      <script src="https://a248.e.akamai.net/assets.github.com/assets/frameworks-010d500708696b4ecee44478b5229d626367e844.js" type="text/javascript"></script>
      <script src="https://a248.e.akamai.net/assets.github.com/assets/github-3650b119e8cb8e869962cc12cf15570bac2a8847.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="c06ebbd21742baf27479265617977323">

        <link data-pjax-transient rel='permalink' href='/vakata/jstree/blob/cdb5bf9951ae1138a75aa8385f79fdd5430f9f52/dist/jstree.min.js'>
    <meta property="og:title" content="jstree"/>
    <meta property="og:type" content="githubog:gitrepository"/>
    <meta property="og:url" content="https://github.com/vakata/jstree"/>
    <meta property="og:image" content="https://secure.gravatar.com/avatar/a4df3beed18ee4ce469b74eb8f8604cd?s=420&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png"/>
    <meta property="og:site_name" content="GitHub"/>
    <meta property="og:description" content="jstree - jquery tree plugin"/>
    <meta property="twitter:card" content="summary"/>
    <meta property="twitter:site" content="@GitHub">
    <meta property="twitter:title" content="vakata/jstree"/>

    <meta name="description" content="jstree - jquery tree plugin" />

  <link href="https://github.com/vakata/jstree/commits/master.atom" rel="alternate" title="Recent Commits to jstree:master" type="application/atom+xml" />

  </head>


  <body class="logged_in page-blob windows vis-public env-production  ">
    <div id="wrapper">

      

      
      
      

      <div class="header header-logged-in true">
  <div class="container clearfix">

    <a class="header-logo-blacktocat" href="https://github.com/">
  <span class="mega-icon mega-icon-blacktocat"></span>
</a>

    <div class="divider-vertical"></div>

      <a href="/notifications" class="notification-indicator tooltipped downwards" title="You have no unread notifications">
    <span class="mail-status all-read"></span>
  </a>
  <div class="divider-vertical"></div>


      <div class="command-bar js-command-bar  ">
            <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">
  <a href="/search/advanced" class="advanced-search-icon tooltipped downwards command-bar-search" id="advanced_search" title="Advanced search"><span class="mini-icon mini-icon-advanced-search "></span></a>

  <input type="text" data-hotkey="/ s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" data-username="ableasdale" autocapitalize="off">

  <span class="mini-icon help tooltipped downwards" title="Show command bar help">
    <span class="mini-icon mini-icon-help"></span>
  </span>

  <input type="hidden" name="ref" value="cmdform">

    <input type="hidden" class="js-repository-name-with-owner" value="vakata/jstree"/>
    <input type="hidden" class="js-repository-branch" value="master"/>
    <input type="hidden" class="js-repository-tree-sha" value="9cbf616866cd0706fc8815462bdbf6696c036dca"/>

  <div class="divider-vertical"></div>
</form>
        <ul class="top-nav">
            <li class="explore"><a href="https://github.com/explore">Explore</a></li>
            <li><a href="https://gist.github.com">Gist</a></li>
            <li><a href="/blog">Blog</a></li>
          <li><a href="http://help.github.com">Help</a></li>
        </ul>
      </div>

    

  
    <ul id="user-links">
      <li>
        <a href="https://github.com/ableasdale" class="name">
          <img height="20" src="https://secure.gravatar.com/avatar/cb15afa9bc592b8589c2a0d31ee26d02?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="20" /> ableasdale
        </a>
      </li>
      <li>
        <a href="/new" id="new_repo" class="tooltipped downwards" title="Create a new repo">
          <span class="mini-icon mini-icon-create"></span>
        </a>
      </li>
      <li>
        <a href="/settings/profile" id="account_settings"
          class="tooltipped downwards"
          title="Account settings ">
          <span class="mini-icon mini-icon-account-settings"></span>
        </a>
      </li>
      <li>
        <a href="/logout" data-method="post" id="logout" class="tooltipped downwards" title="Sign out">
          <span class="mini-icon mini-icon-logout"></span>
        </a>
      </li>
    </ul>



    
  </div>
</div>

      

      

      


            <div class="site hfeed" itemscope itemtype="http://schema.org/WebPage">
      <div class="hentry">
        
        <div class="pagehead repohead instapaper_ignore readability-menu ">
          <div class="container">
            <div class="title-actions-bar">
              


<ul class="pagehead-actions">


    <li class="subscription">
      <form accept-charset="UTF-8" action="/notifications/subscribe" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="S6Afz6WjpYNJ2IXGAJBiv0YK4AcAsax/jq48EJ3zF8U=" /></div>  <input id="repository_id" name="repository_id" type="hidden" value="353561" />

    <div class="select-menu js-menu-container js-select-menu">
      <span class="minibutton select-menu-button js-menu-target">
        <span class="js-select-button">
          <span class="mini-icon mini-icon-watching"></span>
          Watch
        </span>
      </span>

      <div class="select-menu-modal-holder js-menu-content">
        <div class="select-menu-modal">
          <div class="select-menu-header">
            <span class="select-menu-title">Notification status</span>
            <span class="mini-icon mini-icon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-list js-navigation-container">

            <div class="select-menu-item js-navigation-item js-navigation-target selected">
              <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
              <div class="select-menu-item-text">
                <input checked="checked" id="do_included" name="do" type="radio" value="included" />
                <h4>Not watching</h4>
                <span class="description">You only receive notifications for discussions in which you participate or are @mentioned.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="mini-icon mini-icon-watching"></span>
                  Watch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item js-navigation-target ">
              <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
              <div class="select-menu-item-text">
                <input id="do_subscribed" name="do" type="radio" value="subscribed" />
                <h4>Watching</h4>
                <span class="description">You receive notifications for all discussions in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="mini-icon mini-icon-unwatch"></span>
                  Unwatch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item js-navigation-target ">
              <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
              <div class="select-menu-item-text">
                <input id="do_ignore" name="do" type="radio" value="ignore" />
                <h4>Ignoring</h4>
                <span class="description">You do not receive any notifications for discussions in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="mini-icon mini-icon-mute"></span>
                  Stop ignoring
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

</form>
    </li>

    <li class="js-toggler-container js-social-container starring-container ">
      <a href="/vakata/jstree/unstar" class="minibutton js-toggler-target star-button starred upwards" title="Unstar this repo" data-remote="true" data-method="post" rel="nofollow">
        <span class="mini-icon mini-icon-remove-star"></span>
        <span class="text">Unstar</span>
      </a>
      <a href="/vakata/jstree/star" class="minibutton js-toggler-target star-button unstarred upwards" title="Star this repo" data-remote="true" data-method="post" rel="nofollow">
        <span class="mini-icon mini-icon-star"></span>
        <span class="text">Star</span>
      </a>
      <a class="social-count js-social-count" href="/vakata/jstree/stargazers">845</a>
    </li>

        <li>
          <a href="/vakata/jstree/fork_select" class="minibutton js-toggler-target fork-button lighter upwards" title="Fork this repo" rel="facebox nofollow">
            <span class="mini-icon mini-icon-branch-create"></span>
            <span class="text">Fork</span>
          </a>
          <a href="/vakata/jstree/network" class="social-count">193</a>
        </li>


</ul>

              <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
                <span class="repo-label"><span>public</span></span>
                <span class="mega-icon mega-icon-public-repo"></span>
                <span class="author vcard">
                  <a href="/vakata" class="url fn" itemprop="url" rel="author">
                  <span itemprop="title">vakata</span>
                  </a></span> /
                <strong><a href="/vakata/jstree" class="js-current-repository">jstree</a></strong>
              </h1>
            </div>

            
  <ul class="tabs">
    <li><a href="/vakata/jstree" class="selected" highlight="repo_source repo_downloads repo_commits repo_tags repo_branches">Code</a></li>
    <li><a href="/vakata/jstree/network" highlight="repo_network">Network</a></li>
    <li><a href="/vakata/jstree/pulls" highlight="repo_pulls">Pull Requests <span class='counter'>4</span></a></li>

      <li><a href="/vakata/jstree/issues" highlight="repo_issues">Issues <span class='counter'>108</span></a></li>



    <li><a href="/vakata/jstree/graphs" highlight="repo_graphs repo_contributors">Graphs</a></li>


  </ul>
  
<div class="tabnav">

  <span class="tabnav-right">
    <ul class="tabnav-tabs">
          <li><a href="/vakata/jstree/tags" class="tabnav-tab" highlight="repo_tags">Tags <span class="counter ">1</span></a></li>
    </ul>
    
  </span>

  <div class="tabnav-widget scope">


    <div class="select-menu js-menu-container js-select-menu js-branch-menu">
      <a class="minibutton select-menu-button js-menu-target" data-hotkey="w" data-ref="master">
        <span class="mini-icon mini-icon-branch"></span>
        <i>branch:</i>
        <span class="js-select-button">master</span>
      </a>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container">

        <div class="select-menu-modal">
          <div class="select-menu-header">
            <span class="select-menu-title">Switch branches/tags</span>
            <span class="mini-icon mini-icon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-filters">
            <div class="select-menu-text-filter">
              <input type="text" id="commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
            </div>
            <div class="select-menu-tabs">
              <ul>
                <li class="select-menu-tab">
                  <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
                </li>
                <li class="select-menu-tab">
                  <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
                </li>
              </ul>
            </div><!-- /.select-menu-tabs -->
          </div><!-- /.select-menu-filters -->

          <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket css-truncate" data-tab-filter="branches">

            <div data-filterable-for="commitish-filter-field" data-filterable-type="substring">

                <div class="select-menu-item js-navigation-item js-navigation-target selected">
                  <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                  <a href="/vakata/jstree/blob/master/dist/jstree.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="master" rel="nofollow" title="master">master</a>
                </div> <!-- /.select-menu-item -->
                <div class="select-menu-item js-navigation-item js-navigation-target ">
                  <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                  <a href="/vakata/jstree/blob/v.1.0/dist/jstree.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="v.1.0" rel="nofollow" title="v.1.0">v.1.0</a>
                </div> <!-- /.select-menu-item -->
                <div class="select-menu-item js-navigation-item js-navigation-target ">
                  <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                  <a href="/vakata/jstree/blob/v.pre1.0/dist/jstree.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="v.pre1.0" rel="nofollow" title="v.pre1.0">v.pre1.0</a>
                </div> <!-- /.select-menu-item -->
            </div>

              <div class="select-menu-no-results">Nothing to show</div>
          </div> <!-- /.select-menu-list -->


          <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket css-truncate" data-tab-filter="tags">
            <div data-filterable-for="commitish-filter-field" data-filterable-type="substring">

                <div class="select-menu-item js-navigation-item js-navigation-target ">
                  <span class="select-menu-item-icon mini-icon mini-icon-confirm"></span>
                  <a href="/vakata/jstree/blob/2.0.0-alpha/dist/jstree.min.js" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" data-name="2.0.0-alpha" rel="nofollow" title="2.0.0-alpha">2.0.0-alpha</a>
                </div> <!-- /.select-menu-item -->
            </div>

            <div class="select-menu-no-results">Nothing to show</div>

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

  </div> <!-- /.scope -->

  <ul class="tabnav-tabs">
    <li><a href="/vakata/jstree" class="selected tabnav-tab" highlight="repo_source">Files</a></li>
    <li><a href="/vakata/jstree/commits/master" class="tabnav-tab" highlight="repo_commits">Commits</a></li>
    <li><a href="/vakata/jstree/branches" class="tabnav-tab" highlight="repo_branches" rel="nofollow">Branches <span class="counter ">3</span></a></li>
  </ul>

</div>

  
  
  


            
          </div>
        </div><!-- /.repohead -->

        <div id="js-repo-pjax-container" class="container context-loader-container" data-pjax-container>
          


<!-- blob contrib key: blob_contributors:v21:8aa3b1daef6355347adb0f62e3903f05 -->
<!-- blob contrib frag key: views10/v8/blob_contributors:v21:8aa3b1daef6355347adb0f62e3903f05 -->


<div id="slider">
    <div class="frame-meta">

      <p title="This is a placeholder element" class="js-history-link-replace hidden"></p>

        <div class="breadcrumb">
          <span class='bold'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/vakata/jstree" class="js-slide-to" data-branch="master" data-direction="back" itemscope="url"><span itemprop="title">jstree</span></a></span></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/vakata/jstree/tree/master/dist" class="js-slide-to" data-branch="master" data-direction="back" itemscope="url"><span itemprop="title">dist</span></a></span><span class="separator"> / </span><strong class="final-path">jstree.min.js</strong> <span class="js-zeroclipboard zeroclipboard-button" data-clipboard-text="dist/jstree.min.js" data-copied-hint="copied!" title="copy to clipboard"><span class="mini-icon mini-icon-clipboard"></span></span>
        </div>

      <a href="/vakata/jstree/find/master" class="js-slide-to" data-hotkey="t" style="display:none">Show File Finder</a>


        
  <div class="commit file-history-tease">
    <img class="main-avatar" height="24" src="https://secure.gravatar.com/avatar/ad05d7f561089115e9de981eb8c0e779?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
    <span class="author"><span rel="author">Ivan Bozhanov</span></span>
    <time class="js-relative-date" datetime="2013-03-21T16:15:07-07:00" title="2013-03-21 16:15:07">March 21, 2013</time>
    <div class="commit-title">
        <a href="/vakata/jstree/commit/cdb5bf9951ae1138a75aa8385f79fdd5430f9f52" class="message">fixed a bug with get_parent</a>
    </div>

    <div class="participation">
      <p class="quickstat"><a href="#blob_contributors_box" rel="facebox"><strong>1</strong> contributor</a></p>
      
    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2>Users on GitHub who have contributed to this file</h2>
      <ul class="facebox-user-list">
        <li>
          <img height="24" src="https://secure.gravatar.com/avatar/a4df3beed18ee4ce469b74eb8f8604cd?s=140&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" width="24" />
          <a href="/vakata">vakata</a>
        </li>
      </ul>
    </div>
  </div>


    </div><!-- ./.frame-meta -->

    <div class="frames">
      <div class="frame" data-permalink-url="/vakata/jstree/blob/cdb5bf9951ae1138a75aa8385f79fdd5430f9f52/dist/jstree.min.js" data-title="jstree/dist/jstree.min.js at master · vakata/jstree · GitHub" data-type="blob">

        <div id="files" class="bubble">
          <div class="file">
            <div class="meta">
              <div class="info">
                <span class="icon"><b class="mini-icon mini-icon-text-file"></b></span>
                <span class="mode" title="File Mode">file</span>
                  <span>4 lines (4 sloc)</span>
                <span>83.187 kb</span>
              </div>
              <div class="actions">
                <div class="button-group">
                        <a class="minibutton tooltipped leftwards"
                           title="Clicking this button will automatically fork this project so you can edit the file"
                           href="/vakata/jstree/edit/master/dist/jstree.min.js"
                           data-method="post" rel="nofollow">Edit</a>
                  <a href="/vakata/jstree/raw/master/dist/jstree.min.js" class="button minibutton " id="raw-url">Raw</a>
                    <a href="/vakata/jstree/blame/master/dist/jstree.min.js" class="button minibutton ">Blame</a>
                  <a href="/vakata/jstree/commits/master/dist/jstree.min.js" class="button minibutton " rel="nofollow">History</a>
                </div><!-- /.button-group -->
              </div><!-- /.actions -->

            </div>
                <div class="blob-wrapper data type-javascript js-blob-data">
      <table class="file-code file-blob">
        <tr class="file-code-line">
          <td class="blob-line-nums">
            <span id="L1" rel="#L1">1</span>
<span id="L2" rel="#L2">2</span>
<span id="L3" rel="#L3">3</span>
<span id="L4" rel="#L4">4</span>

          </td>
          <td class="blob-line-code">
                <div class='line' id='LC1'>/*! jsTree - v2.0.0-alpha - 2013-03-22 - (MIT) */</div><div class='line' id='LC2'>(function(e){&quot;use strict&quot;;if(!e.jstree){var t=0,n=!1,s=!1,a=[];e.jstree={version:&quot;2.0.0-alpha&quot;,defaults:{plugins:[]},plugins:{}},e.jstree.create=function(n,s){var a=new e.jstree.core(++t),r=s;return s=e.extend(!0,{},e.jstree.defaults,s),r&amp;&amp;r.plugins&amp;&amp;(s.plugins=r.plugins),e.each(s.plugins,function(e,t){&quot;core&quot;!==e&amp;&amp;(a=a.plugin(t,s[t]))}),a.init(n,s),a},e.jstree.core=function(e){this._id=e,this._data={core:{themes:{}}}},e.jstree.reference=function(t){return e(t).closest(&quot;.jstree&quot;).data(&quot;jstree&quot;)},e.fn.jstree=function(t){var n=&quot;string&quot;==typeof t,s=Array.prototype.slice.call(arguments,1),a=null;return this.each(function(){var r=e(this).data(&quot;jstree&quot;),i=n&amp;&amp;r?r[t]:null;return a=n&amp;&amp;i?i.apply(r,s):null,r||e(this).data(&quot;jstree&quot;,new e.jstree.create(this,t)),null!==a&amp;&amp;a!==void 0?!1:void 0}),null!==a&amp;&amp;a!==void 0?a:this},e.expr[&quot;:&quot;].jstree=e.expr.createPseudo(function(){return function(t){return e(t).hasClass(&quot;jstree&quot;)&amp;&amp;e(t).data(&quot;jstree&quot;)!==void 0}}),e.jstree.defaults.core={strings:!1,check_callback:!0,animation:100,aria_roles:!1,multiple:!0,themes:{name:!1,url:!0,dots:!0,icons:!0,dir:!1},base_height:!1,clean_loaded:!0,correct_loaded:!0,expand_selected_onload:!0},e.jstree.core.prototype={plugin:function(t,n){var s=e.jstree.plugins[t];return s?(this._data[t]={},s.prototype=this,new s(n,this)):this},init:function(t,n){this.element=e(t).addClass(&quot;jstree jstree-&quot;+this._id),this.settings=n,this.element.bind(&quot;destroyed&quot;,e.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl=&quot;rtl&quot;===this.element.css(&quot;direction&quot;),this.element[this._data.core.rtl?&quot;addClass&quot;:&quot;removeClass&quot;](&quot;jstree-rtl&quot;),this.settings.core.aria_roles&amp;&amp;this.element.attr(&quot;role&quot;,&quot;tree&quot;),this._data.core.selected=e(),this.bind(),this.trigger(&quot;init&quot;),this._data.core.original_container_html=this.element.find(&quot; &gt; ul &gt; li&quot;).clone(!0),this._data.core.original_container_html.find(&quot;li&quot;).addBack().contents().filter(function(){return 3===this.nodeType&amp;&amp;(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html(&quot;&lt;ul&gt;&lt;li class=&#39;jstree-loading jstree-leaf jstree-last&#39;&gt;&lt;i class=&#39;jstree-icon jstree-ocl&#39;&gt;&lt;/i&gt;&lt;a class=&#39;jstree-anchor&#39; href=&#39;#&#39;&gt;&quot;+this.get_string(&quot;Loading ...&quot;)+&quot;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&quot;),this._data.core.li_height=this.settings.base_height||this.get_container_ul().children(&quot;li:eq(0)&quot;).height()||18,this.load_node(-1)},destroy:function(){this.element.unbind(&quot;destroyed&quot;,this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass(&quot;jstree&quot;).removeData(&quot;jstree&quot;).find(&quot;[class^=&#39;jstree&#39;]&quot;).addBack().attr(&quot;class&quot;,function(){return this.className.replace(/jstree[^ ]*|$/gi,&quot;&quot;)}),this.element=null},bind:function(){e.support.touch&amp;&amp;this.element.addTouch(),this.element.on(&quot;dblclick.jstree&quot;,function(){if(document.selection&amp;&amp;document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}).on(&quot;click.jstree&quot;,&quot;.jstree-ocl&quot;,e.proxy(function(e){this.toggle_node(e.target)},this)).on(&quot;click.jstree&quot;,&quot;.jstree-anchor&quot;,e.proxy(function(e){e.preventDefault(),this.activate_node(e.currentTarget,e)},this)).on(&quot;keydown.jstree&quot;,&quot;.jstree-anchor&quot;,e.proxy(function(t){var n=null;switch(t.which){case 13:case 32:t.type=&quot;click&quot;,e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(n=this.get_prev(t.currentTarget),n&amp;&amp;n.length&amp;&amp;n.children(&quot;.jstree-anchor&quot;).focus());break;case 38:t.preventDefault(),n=this.get_prev(t.currentTarget),n&amp;&amp;n.length&amp;&amp;n.children(&quot;.jstree-anchor&quot;).focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget):(n=this.get_next(t.currentTarget),n&amp;&amp;n.length&amp;&amp;n.children(&quot;.jstree-anchor&quot;).focus());break;case 40:t.preventDefault(),n=this.get_next(t.currentTarget),n&amp;&amp;n.length&amp;&amp;n.children(&quot;.jstree-anchor&quot;).focus();break;default:}},this)).on(&quot;create_node.jstree&quot;,e.proxy(function(e,t){this.clean_node(t.node)},this)).on(&quot;load_node.jstree&quot;,e.proxy(function(t,n){if(n.status){if(this.settings.core.clean_loaded)if(-1===n.node){var s=this.get_container_ul().detach();s.children(&quot;li&quot;).length&amp;&amp;this.clean_node(s.children(&quot;li&quot;)),this.element.prepend(s)}else{var a=this._data.core.selected.length;n.node.children(&quot;ul&quot;).children(&quot;li&quot;).length&amp;&amp;this.clean_node(n.node.children(&quot;ul&quot;).children(&quot;li&quot;)),this._data.core.ready&amp;&amp;a!==this._data.core.selected.length&amp;&amp;this.trigger(&quot;changed&quot;,{action:&quot;clean_node&quot;,selected:this._data.core.selected})}-1!==n.node||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger(&quot;loaded&quot;)),this._data.core.ready||this.get_container_ul().find(&quot;.jstree-loading:eq(0)&quot;).length||(this._data.core.ready=!0,this._data.core.selected.length&amp;&amp;(this.settings.core.expand_selected_onload&amp;&amp;this._data.core.selected.parents(&quot;.jstree-closed&quot;).each(e.proxy(function(e,t){this.open_node(t,!1,0)},this)),this.trigger(&quot;changed&quot;,{action:&quot;ready&quot;,selected:this._data.core.selected})),this.trigger(&quot;ready&quot;))}},this)).on(&quot;loaded.jstree&quot;,e.proxy(function(e,t){this.settings.core.correct_loaded&amp;&amp;t.instance.get_container_ul().children(&quot;li&quot;).each(function(){t.instance.correct_node(this)})},this)).on(&quot;open_node.jstree&quot;,e.proxy(function(e,t){this.settings.core.correct_loaded&amp;&amp;t.node.children(&quot;li&quot;).each(function(){t.instance.correct_node(this)})},this)).on(&quot;init.jstree&quot;,e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.icons=e.icons,e.name===!1&amp;&amp;(e.name=&quot;default&quot;),this.set_theme(e.name,e.url)},this)).on(&quot;loaded.jstree&quot;,e.proxy(function(){this[this._data.core.themes.dots?&quot;show_dots&quot;:&quot;hide_dots&quot;](),this[this._data.core.themes.icons?&quot;show_icons&quot;:&quot;hide_icons&quot;]()},this)).on(&quot;focus.jstree&quot;,&quot;.jstree-anchor&quot;,e.proxy(function(t){e(t.currentTarget).mouseenter()},this)).on(&quot;blur.jstree&quot;,&quot;.jstree-anchor&quot;,e.proxy(function(t){e(t.currentTarget).mouseleave()},this)).on(&quot;mouseenter.jstree&quot;,&quot;.jstree-anchor&quot;,e.proxy(function(e){var t=this.element.find(&quot;.jstree-anchor:focus&quot;).not(&quot;.jstree-clicked&quot;);t&amp;&amp;t.length&amp;&amp;t[0]!==e.currentTarget&amp;&amp;t.blur(),this.hover_node(e.currentTarget)},this)).on(&quot;mouseleave.jstree&quot;,&quot;.jstree-anchor&quot;,e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(&quot;.jstree&quot;),e(document).off(&quot;.jstree-&quot;+this._id)},trigger:function(t,n,s){n||(n={}),n.instance=this,&quot;number&quot;===(typeof s).toLowerCase()?setTimeout(e.proxy(function(){this.element.triggerHandler(t.replace(&quot;.jstree&quot;,&quot;&quot;)+&quot;.jstree&quot;,n)},this),s):this.element.triggerHandler(t.replace(&quot;.jstree&quot;,&quot;&quot;)+&quot;.jstree&quot;,n)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(&quot;ul:eq(0)&quot;)},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&amp;&amp;n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&amp;&amp;1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&amp;&amp;1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&amp;&amp;1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t){return-1===t?-1:(t=e(t,this.element),t.hasClass(&quot;.jstree&quot;)?-1:(t=t.closest(&quot;li&quot;,this.element),t.length?t:!1))},get_next:function(t,n){var s;return t=this.get_node(t),-1===t?(s=this._firstChild(this.get_container_ul()[0]),s?e(s):!1):t&amp;&amp;t.length?n?(s=this._nextSibling(t[0]),s?e(s):!1):t.hasClass(&quot;jstree-open&quot;)?(s=this._firstChild(t.children(&quot;ul&quot;)[0]),s?e(s):!1):(s=this._nextSibling(t[0]))?e(s):t.parentsUntil(&quot;.jstree&quot;,&quot;li&quot;).next(&quot;li&quot;).eq(0):!1},get_prev:function(t,n){var s;if(t=this.get_node(t),-1===t)return s=this.get_container_ul()[0].lastChild,s?e(s):!1;if(!t||!t.length)return!1;if(n)return s=this._previousSibling(t[0]),s?e(s):!1;if(s=this._previousSibling(t[0])){for(t=e(s);t.hasClass(&quot;jstree-open&quot;);)t=t.children(&quot;ul:eq(0)&quot;).children(&quot;li:last&quot;);return t}return s=t[0].parentNode.parentNode,s&amp;&amp;&quot;LI&quot;===s.tagName?e(s):!1},get_parent:function(t){if(t=this.get_node(t),-1===t||!t||!t.length)return!1;var n=t[0].parentNode.parentNode;return&quot;LI&quot;===n.tagName?e(n):-1},get_children:function(e){return e=this.get_node(e),-1===e?this.get_container_ul().children(&quot;li&quot;):e&amp;&amp;e.length?e.children(&quot;ul&quot;).children(&quot;li&quot;):!1},is_parent:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;(this._firstChild(e.children(&quot;ul&quot;)[0])||e.hasClass(&quot;jstree-closed&quot;))},is_loaded:function(e){return e=this.get_node(e),e&amp;&amp;(-1===e&amp;&amp;!this.element.children(&quot;ul&quot;).children(&quot;li.jstree-loading&quot;).length||-1!==e&amp;&amp;!e.hasClass(&quot;jstree-loading&quot;)&amp;&amp;(this._firstChild(e.children(&quot;ul&quot;)[0])||e.hasClass(&quot;jstree-leaf&quot;)))},is_loading:function(e){return e=this.get_node(e),e&amp;&amp;(-1===e&amp;&amp;this.element.children(&quot;ul&quot;).children(&quot;li.jstree-loading&quot;).length||-1!==e&amp;&amp;e.hasClass(&quot;jstree-loading&quot;))},is_open:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.hasClass(&quot;jstree-open&quot;)},is_closed:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.hasClass(&quot;jstree-closed&quot;)},is_leaf:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.hasClass(&quot;jstree-leaf&quot;)},load_node:function(t,n){return(t=this.get_node(t))?(-1!==t&amp;&amp;t.addClass(&quot;jstree-loading&quot;),this._load_node(t,e.proxy(function(e){-1!==t&amp;&amp;t.removeClass(&quot;jstree-loading&quot;),this.trigger(&quot;load_node&quot;,{node:t,status:e}),n&amp;&amp;n.call(this,t,e)},this)),!0):(n.call(this,t,!1),!1)},_load_node:function(e,t){-1===e?(this.get_container_ul().empty().append(this._data.core.original_container_html.clone(!0)),t.call(this,!0)):t.call(this,!1)},open_node:function(e,t,n){if(e=this.get_node(e),-1===e||!e||!e.length)return!1;if(n=&quot;undefined&quot;===(typeof n).toLowerCase()?this.settings.core.animation:n,!this.is_closed(e))return t&amp;&amp;t.call(this,e,!1),!1;if(this.is_loaded(e)){var s=this;n?e.children(&quot;ul&quot;).css(&quot;display&quot;,&quot;none&quot;).end().removeClass(&quot;jstree-closed&quot;).addClass(&quot;jstree-open&quot;).children(&quot;ul&quot;).stop(!0,!0).slideDown(n,function(){this.style.display=&quot;&quot;,s.trigger(&quot;after_open&quot;,{node:e})}):e[0].className=e[0].className.replace(&quot;jstree-closed&quot;,&quot;jstree-open&quot;),t&amp;&amp;t.call(this,e,!0),this.trigger(&quot;open_node&quot;,{node:e}),n||this.trigger(&quot;after_open&quot;,{node:e})}else this.load_node(e,function(e,s){return s?this.open_node(e,t,n):t?t.call(this,e,!1):!1})},close_node:function(e,t){if(e=this.get_node(e),!e||!e.length||!this.is_open(e))return!1;t=&quot;undefined&quot;===(typeof t).toLowerCase()?this.settings.core.animation:t;var n=this;t?e.children(&quot;ul&quot;).attr(&quot;style&quot;,&quot;display:block !important&quot;).end().removeClass(&quot;jstree-open&quot;).addClass(&quot;jstree-closed&quot;).children(&quot;ul&quot;).stop(!0,!0).slideUp(t,function(){this.style.display=&quot;&quot;,n.trigger(&quot;after_close&quot;,{node:e})}):e[0].className=e[0].className.replace(&quot;jstree-open&quot;,&quot;jstree-closed&quot;),this.trigger(&quot;close_node&quot;,{node:e}),t||this.trigger(&quot;after_close&quot;,{node:e})},toggle_node:function(e){return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,t,n){e=e?this.get_node(e):-1,e=e&amp;&amp;-1!==e?e:this.get_container_ul(),n=n||e;var s=this;e=this.is_closed(e)?e.find(&quot;li.jstree-closed&quot;).addBack():e.find(&quot;li.jstree-closed&quot;),e.each(function(){s.open_node(this,s.is_loaded(this)?!1:function(e){this.open_all(e,t,n)},t||0)}),0===n.find(&quot;li.jstree-closed&quot;).length&amp;&amp;this.trigger(&quot;open_all&quot;,{node:n})},close_all:function(e,t){e=e?this.get_node(e):-1;var n=e&amp;&amp;-1!==e?e:this.get_container_ul(),s=this;n=this.is_open(n)?n.find(&quot;li.jstree-open&quot;).addBack():n.find(&quot;li.jstree-open&quot;),n.each(function(){s.close_node(this,t||0)}),this.trigger(&quot;close_all&quot;,{node:e})},is_disabled:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.children(&quot;.jstree-anchor&quot;).hasClass(&quot;jstree-disabled&quot;)},enable_node:function(e){return e=this.get_node(e),e&amp;&amp;e.length?(e.children(&quot;.jstree-anchor&quot;).removeClass(&quot;jstree-disabled&quot;),this.trigger(&quot;enable_node&quot;,{node:e}),void 0):!1},disable_node:function(e){return e=this.get_node(e),e&amp;&amp;e.length?(e.children(&quot;.jstree-anchor&quot;).addClass(&quot;jstree-disabled&quot;),this.trigger(&quot;disable_node&quot;,{node:e}),void 0):!1},activate_node:function(e,t){return this.is_disabled(e)?!1:(this.settings.core.multiple&amp;&amp;(t.metaKey||t.ctrlKey)?this.is_selected(e)?this.deselect_node(e):this.select_node(e):(this.deselect_all(!0),this.select_node(e)),this.trigger(&quot;activate_node&quot;,{node:e}),void 0)},hover_node:function(e){return e=this.get_node(e),e&amp;&amp;e.length?(e.children(&quot;.jstree-anchor&quot;).addClass(&quot;jstree-hovered&quot;),this.trigger(&quot;hover_node&quot;,{node:e}),void 0):!1},dehover_node:function(e){return e=this.get_node(e),e&amp;&amp;e.length?(e.children(&quot;.jstree-anchor&quot;).removeClass(&quot;jstree-hovered&quot;),this.trigger(&quot;dehover_node&quot;,{node:e}),void 0):!1},select_node:function(e,t,n){if(e=this.get_node(e),!e||!e.length)return!1;if(this._data.core.selected=this._data.core.selected.add(e),this.element.find(&quot;.jstree-clicked&quot;).removeClass(&quot;jstree-clicked&quot;),this._data.core.selected.children(&quot;.jstree-anchor&quot;).addClass(&quot;jstree-clicked&quot;),!n){var s=this;e.parents(&quot;.jstree-closed&quot;).each(function(){s.open_node(this,!1,0)})}this.trigger(&quot;select_node&quot;,{node:e,selected:this._data.core.selected}),t||this.trigger(&quot;changed&quot;,{action:&quot;select_node&quot;,node:e,selected:this._data.core.selected})},deselect_node:function(e,t){return e=this.get_node(e),e&amp;&amp;e.length?(this._data.core.selected=this._data.core.selected.not(e),this.element.find(&quot;.jstree-clicked&quot;).removeClass(&quot;jstree-clicked&quot;),this._data.core.selected.children(&quot;.jstree-anchor&quot;).addClass(&quot;jstree-clicked&quot;),this.trigger(&quot;deselect_node&quot;,{node:e,selected:this._data.core.selected}),t||this.trigger(&quot;changed&quot;,{action:&quot;deselect_node&quot;,node:e,selected:this._data.core.selected}),void 0):!1},deselect_all:function(t){this._data.core.selected=e();var n=this.element.find(&quot;.jstree-clicked&quot;).removeClass(&quot;jstree-clicked&quot;);this.trigger(&quot;deselect_all&quot;,{selected:this._data.core.selected,node:n}),t||this.trigger(&quot;changed&quot;,{action:&quot;deselect_all&quot;,selected:this._data.core.selected,node:n})},is_selected:function(e){return e=this.get_node(e),e&amp;&amp;e.length?this._data.core.selected.index(e)&gt;=0:!1},get_selected:function(){return this._data.core.selected},clean_node:function(t){t=this.get_node(t),t=t&amp;&amp;-1!==t?t.find(&quot;li&quot;).addBack():this.element.find(&quot;li&quot;),t.find(&quot;li.jstree-clicked&quot;).removeClass(&quot;jstree-clicked&quot;),this.settings.core.aria_roles&amp;&amp;t.attr(&quot;role&quot;,&quot;treeitem&quot;).parent().attr(&quot;role&quot;,&quot;group&quot;);var n=this;return t.each(function(){var t=e(this),s=t.children(&quot;a&quot;),a=t.data(&quot;jstree&quot;),r=a&amp;&amp;a.opened||t.hasClass(&quot;jstree-open&quot;)?&quot;open&quot;:a&amp;&amp;(a.closed||a.children)||t.children(&quot;ul&quot;).length?&quot;closed&quot;:&quot;leaf&quot;;switch(a&amp;&amp;a.opened&amp;&amp;delete a.opened,a&amp;&amp;a.closed&amp;&amp;delete a.closed,t.removeClass(&quot;jstree-open jstree-closed jstree-leaf jstree-last&quot;),s.length?e.trim(s.attr(&quot;href&quot;))||s.attr(&quot;href&quot;,&quot;#&quot;):(t.contents().filter(function(){return 3===this.nodeType||&quot;UL&quot;!==this.tagName}).wrapAll(&#39;&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;&#39;),s=t.children(&quot;a&quot;),s.html(t.children(&quot;a&quot;).html().replace(/[\s\t\n]+$/,&quot;&quot;))),s.addClass(&quot;jstree-anchor&quot;),t.children(&quot;i.jstree-ocl&quot;).length||t.prepend(&quot;&lt;i class=&#39;jstree-icon jstree-ocl&#39;&gt;&amp;#160;&lt;/i&gt;&quot;),t.next().length||t.addClass(&quot;jstree-last&quot;),r){case&quot;leaf&quot;:t.addClass(&quot;jstree-leaf&quot;);break;case&quot;closed&quot;:t.addClass(&quot;jstree-closed&quot;),n.close_node(t,0);break;case&quot;open&quot;:t.addClass(&quot;jstree-closed&quot;),n.open_node(t,!1,0)}s.children(&quot;i.jstree-themeicon&quot;).length||s.prepend(&quot;&lt;i class=&#39;jstree-icon jstree-themeicon&#39;&gt;&amp;#160;&lt;/i&gt;&quot;),a&amp;&amp;a.icon!==void 0&amp;&amp;(n.set_icon(t,a.icon),delete a.icon),a&amp;&amp;a.selected&amp;&amp;(n.select_node(t,!0,!0),delete a.selected),a&amp;&amp;a.disabled&amp;&amp;(n.disable_node(t),delete a.disabled)})},correct_node:function(t,n){return t=this.get_node(t),!t||-1===t&amp;&amp;!n?!1:(t=-1===t?this.element.find(&quot;li&quot;):n?t.find(&quot;li&quot;).addBack():t,t.each(function(){var t=e(this);switch(!0){case t.hasClass(&quot;jstree-open&quot;)&amp;&amp;!t.children(&quot;ul&quot;).children(&quot;li&quot;).length:t.removeClass(&quot;jstree-open&quot;).addClass(&quot;jstree-leaf&quot;).children(&quot;ul&quot;).remove();break;case t.hasClass(&quot;jstree-leaf&quot;)&amp;&amp;!!t.children(&quot;ul&quot;).children(&quot;li&quot;).length:t.removeClass(&quot;jstree-leaf&quot;).addClass(&quot;jstree-closed&quot;)}t[0===t.next().length?&quot;addClass&quot;:&quot;removeClass&quot;](&quot;jstree-last&quot;)}),t)},get_state:function(){var e={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},themes:{name:this.get_theme(),icons:this._data.core.themes.icons,dots:this._data.core.themes.dots},selected:[]}};return this.get_container_ul().find(&quot;.jstree-open&quot;).each(function(){this.id&amp;&amp;e.core.open.push(this.id)}),this._data.core.selected.each(function(){this.id&amp;&amp;e.core.selected.push(this.id)}),e},set_state:function(t,n){if(t){if(t.core){if(e.isArray(t.core.open)){var s=!0,a=this;return e.each(t.core.open.concat([]),function(n,r){r=document.getElementById(r),r&amp;&amp;(a.is_loaded(r)?(a.is_closed(r)&amp;&amp;a.open_node(r,!1,0),e.vakata.array_remove(t.core.open,n)):(a.is_loading(r)||a.open_node(r,e.proxy(function(){this.set_state(t)},a),0),s=!1))}),s&amp;&amp;(delete t.core.open,this.set_state(t,n)),!1}if(t.core.scroll)return t.core.scroll&amp;&amp;t.core.scroll.left!==void 0&amp;&amp;this.element.scrollLeft(t.core.scroll.left),t.core.scroll&amp;&amp;t.core.scroll.top!==void 0&amp;&amp;this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,delete t.core.open,this.set_state(t,n),!1;if(t.core.themes)return t.core.themes.name&amp;&amp;this.set_theme(t.core.themes.name),t.core.themes.dots!==void 0&amp;&amp;this[t.core.themes.dots?&quot;show_dots&quot;:&quot;hide_dots&quot;](),t.core.themes.icons!==void 0&amp;&amp;this[t.core.themes.icons?&quot;show_icons&quot;:&quot;hide_icons&quot;](),delete t.core.themes,delete t.core.open,this.set_state(t,n),!1;if(t.core.selected){var r=this;return this.deselect_all(),e.each(t.core.selected,function(e,t){r.select_node(document.getElementById(t))}),delete t.core.selected,this.set_state(t,n),!1}return e.isEmptyObject(t)?(n&amp;&amp;n.call(this),this.trigger(&quot;set_state&quot;),!1):!0}return!0}return!1},refresh:function(){this._data.core.state=this.get_state(),this.load_node(-1,function(t,n){n&amp;&amp;this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger(&quot;refresh&quot;)}),this._data.core.state=null})},get_text:function(t,n){return t=this.get_node(t),t&amp;&amp;-1!==t&amp;&amp;t.length?(t=t.children(&quot;a:eq(0)&quot;).clone(),t.children(&quot;.jstree-icon&quot;).remove(),t=t[n?&quot;text&quot;:&quot;html&quot;](),t=e(&quot;&lt;div /&gt;&quot;)[n?&quot;text&quot;:&quot;html&quot;](t),t.html()):!1},set_text:function(e,t){if(e=this.get_node(e),!e||-1===e||!e.length)return!1;e=e.children(&quot;a:eq(0)&quot;);var n=e.children(&quot;I&quot;).clone();return e.html(t).prepend(n),this.trigger(&quot;set_text&quot;,{obj:e,text:t}),!0},parse_json:function(t){var n,s,a,r;return null===t||e.isArray(t)&amp;&amp;0===t.length?!1:e.isArray(t)?(a=e(&quot;&lt;ul /&gt;&quot;),r=this,e.each(t,function(e,t){a.append(r.parse_json(t))}),a):(t===void 0&amp;&amp;(t={}),&quot;string&quot;==typeof t&amp;&amp;(t={title:t}),t.li_attr||(t.li_attr={}),t.a_attr||(t.a_attr={}),t.a_attr.href||(t.a_attr.href=&quot;#&quot;),t.title||(t.title=this.get_string(&quot;New node&quot;)),n=e(&quot;&lt;li /&gt;&quot;).attr(t.li_attr),s=e(&quot;&lt;a /&gt;&quot;).attr(t.a_attr).html(t.title),a=e(&quot;&lt;ul /&gt;&quot;),t.data&amp;&amp;!e.isEmptyObject(t.data)&amp;&amp;n.data(t.data),(t.children===!0||e.isArray(t.children)||n.data(&quot;jstree&quot;)&amp;&amp;e.isArray(n.data(&quot;jstree&quot;).children))&amp;&amp;(n.data(&quot;jstree&quot;)||n.data(&quot;jstree&quot;,{}),n.data(&quot;jstree&quot;).closed=!0),n.append(s),e.isArray(t.children)&amp;&amp;(e.each(t.children,e.proxy(function(e,t){a.append(this.parse_json(t))},this)),n.append(a)),n)},get_json:function(t,n){t=t!==void 0?this.get_node(t):!1,n||t&amp;&amp;-1!==t||(t=this.get_container_ul().children(&quot;li&quot;));var s,a,r,i={},o={},l={};return t&amp;&amp;t.length?t.length&gt;1||!n?(s=[],a=this,t.each(function(){s.push(a.get_json(e(this),!0))}),s):(l=e.vakata.attributes(t,!0),e.each(l,function(t,n){return&quot;id&quot;===t?(i[t]=n,!0):(n=e.trim(n.replace(/\bjstree[^ ]*/gi,&quot;&quot;).replace(/\s+$/gi,&quot; &quot;)),n.length&amp;&amp;(i[t]=n),void 0)}),l=e.vakata.attributes(t.children(&quot;.jstree-anchor&quot;),!0),e.each(l,function(t,n){return&quot;id&quot;===t?(o[t]=n,!0):(n=e.trim(n.replace(/\bjstree[^ ]*/gi,&quot;&quot;).replace(/\s+$/gi,&quot; &quot;)),n.length&amp;&amp;(o[t]=n),void 0)}),s={title:this.get_text(t),data:e.extend(!0,{},t.data()||{}),children:!1,li_attr:i,a_attr:o},s.data.jstree||(s.data.jstree={}),this.is_open(t)&amp;&amp;(s.data.jstree.opened=!0),this.is_closed(t)&amp;&amp;(s.data.jstree.closed=!0),r=this.get_icon(t),r!==void 0&amp;&amp;null!==r&amp;&amp;(s.data.jstree.icon=r),this.is_selected(t)&amp;&amp;(s.data.jstree.selected=!0),t=t.children(&quot;ul&quot;).children(&quot;li&quot;),t.length&amp;&amp;(s.children=[],a=this,t.each(function(){s.children.push(a.get_json(e(this),!0))})),s):!1},create_node:function(e,t,n,s,a){if(e=this.get_node(e),n=n===void 0?&quot;last&quot;:n,-1!==e&amp;&amp;!e.length)return!1;if(!n.match(/^(before|after)$/)&amp;&amp;!a&amp;&amp;!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,n,s,!0)});var r=this.parse_json(t),i=-1===e?this.element:e;switch(-1===e&amp;&amp;(&quot;before&quot;===n&amp;&amp;(n=&quot;first&quot;),&quot;after&quot;===n&amp;&amp;(n=&quot;last&quot;)),n){case&quot;before&quot;:n=e.index(),e=this.get_parent(e);break;case&quot;after&quot;:n=e.index()+1,e=this.get_parent(e);break;case&quot;inside&quot;:case&quot;first&quot;:n=0;break;case&quot;last&quot;:n=i.children(&quot;ul&quot;).children(&quot;li&quot;).length;break;default:n||(n=0)}return this.check(&quot;create_node&quot;,r,e,n)?(i=-1===e?this.element:e,i.children(&quot;ul&quot;).length||i.append(&quot;&lt;ul /&gt;&quot;),i.children(&quot;ul&quot;).children(&quot;li&quot;).eq(n).length?i.children(&quot;ul&quot;).children(&quot;li&quot;).eq(n).before(r):i.children(&quot;ul&quot;).append(r),this.correct_node(e,!0),s&amp;&amp;s.call(this,r),this.trigger(&quot;create_node&quot;,{node:r,parent:e,position:r.index()}),r):!1},rename_node:function(e,t){e=this.get_node(e);var n=this.get_text(e);return this.check(&quot;rename_node&quot;,e,this.get_parent(e),t)?(e&amp;&amp;e.length&amp;&amp;(this.set_text(e,t),this.trigger(&quot;rename_node&quot;,{node:e,title:t,old:n})),void 0):!1},delete_node:function(e){if(e=this.get_node(e),!e||-1===e||!e.length)return!1;var t=this.get_parent(e),n=this.get_prev(e);if(!this.check(&quot;delete_node&quot;,e,t,e.index()))return!1;e=e.detach(),this.correct_node(t),this.correct_node(n),this.trigger(&quot;delete_node&quot;,{node:e,prev:n,parent:t});var s=e.find(&quot;.jstree-clicked&quot;),a=this;return s.length&amp;&amp;(s.each(function(){a.deselect_node(this,!0)}),this.trigger(&quot;changed&quot;,{action:&quot;delete_node&quot;,node:e,selected:this._data.core.selected,parent:t})),e},check:function(t,n,s,a){var r=t.match(/^move_node|copy_node|create_node$/i)?s:n,i=this.settings.core.check_callback;if(i===!1||e.isFunction(i)&amp;&amp;i.call(this,t,n,s,a)===!1)return!1;if(r=-1===r?this.element.data(&quot;jstree&quot;):r.data(&quot;jstree&quot;),r&amp;&amp;r.functions&amp;&amp;r.functions[t]&amp;&amp;(r=r.functions[t],e.isFunction(r)&amp;&amp;(r=r.call(this,t,n,s,a)),r===!1))return!1;switch(t){case&quot;create_node&quot;:break;case&quot;rename_node&quot;:break;case&quot;move_node&quot;:if(r=-1===s?this.element:s,r=r.children(&quot;ul&quot;).children(&quot;li&quot;),r.length&amp;&amp;-1!==r.index(n)&amp;&amp;(a===n.index()||a===n.index()+1))return!1;if(-1!==s&amp;&amp;-1!==s.parentsUntil(&quot;.jstree&quot;,&quot;li&quot;).addBack().index(n))return!1;break;case&quot;copy_node&quot;:break;case&quot;delete_node&quot;:}return!0},move_node:function(t,n,s,a,r){if(t=this.get_node(t),n=this.get_node(n),s=s===void 0?0:s,!t||-1===t||!t.length)return!1;if(-1!==n&amp;&amp;!n.length)return!1;if(!(&quot;&quot;+s).match(/^(before|after)$/)&amp;&amp;!r&amp;&amp;!this.is_loaded(n))return this.load_node(n,function(){this.move_node(t,n,s,a,!0)});var i=this.get_parent(t),o=(&quot;&quot;+s).match(/^(before|after)$/)&amp;&amp;-1!==n?this.get_parent(n):n,l=e.jstree.reference(t),c=-1===n?this:e.jstree.reference(n),d=l._id!==c._id;switch(-1===o&amp;&amp;(n=c.get_container(),&quot;before&quot;===s&amp;&amp;(s=&quot;first&quot;),&quot;after&quot;===s&amp;&amp;(s=&quot;last&quot;)),s){case&quot;before&quot;:s=n.index();break;case&quot;after&quot;:s=n.index()+1;break;case&quot;inside&quot;:case&quot;first&quot;:s=0;break;case&quot;last&quot;:s=n.children(&quot;ul&quot;).children(&quot;li&quot;).length;break;default:s||(s=0)}return this.check(&quot;move_node&quot;,t,o,s)?(n.children(&quot;ul&quot;).length||n.append(&quot;&lt;ul /&gt;&quot;),n.children(&quot;ul&quot;).children(&quot;li&quot;).eq(s).length?n.children(&quot;ul&quot;).children(&quot;li&quot;).eq(s).before(t):n.children(&quot;ul&quot;).append(t),d&amp;&amp;(t.find(&quot;.jstree-icon, .jstree-ocl&quot;).remove(),this.clean_node(t)),l.correct_node(i,!0),c.correct_node(o,!0),a&amp;&amp;a.call(this,t,o,t.index()),this.trigger(&quot;move_node&quot;,{node:t,parent:o,position:t.index(),old_parent:i,is_multi:d,old_instance:l,new_instance:c}),!0):!1},copy_node:function(t,n,s,a,r){if(t=this.get_node(t),n=this.get_node(n),s=s===void 0?&quot;last&quot;:s,!t||-1===t||!t.length)return!1;if(-1!==n&amp;&amp;!n.length)return!1;if(!(&quot;&quot;+s).match(/^(before|after)$/)&amp;&amp;!r&amp;&amp;!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(t,n,s,a,!0)});var i=t,o=this.get_parent(t),l=(&quot;&quot;+s).match(/^(before|after)$/)&amp;&amp;-1!==n?this.get_parent(n):n,c=e.jstree.reference(t),d=-1===n?this:e.jstree.reference(n),h=c._id!==d._id;switch(t=t.clone(!0),t.find(&quot;*[id]&quot;).addBack().each(function(){this.id&amp;&amp;(this.id=&quot;copy_&quot;+this.id)}),-1===l&amp;&amp;(n=d.get_container(),&quot;before&quot;===s&amp;&amp;(s=&quot;first&quot;),&quot;after&quot;===s&amp;&amp;(s=&quot;last&quot;)),s){case&quot;before&quot;:s=n.index();break;case&quot;after&quot;:s=n.index()+1;break;case&quot;inside&quot;:case&quot;first&quot;:s=0;break;case&quot;last&quot;:s=n.children(&quot;ul&quot;).children(&quot;li&quot;).length;break;default:s||(s=0)}return this.check(&quot;copy_node&quot;,i,l,s)?(n.children(&quot;ul&quot;).length||n.append(&quot;&lt;ul /&gt;&quot;),n.children(&quot;ul&quot;).children(&quot;li&quot;).eq(s).length?n.children(&quot;ul&quot;).children(&quot;li&quot;).eq(s).before(t):n.children(&quot;ul&quot;).append(t),h&amp;&amp;t.find(&quot;.jstree-icon, .jstree-ocl&quot;).remove(),d.clean_node(t),d.correct_node(l,!0),a&amp;&amp;a.call(this,t,l,t.index(),i),this.trigger(&quot;copy_node&quot;,{node:t,parent:l,old_parent:o,position:t.index(),original:i,is_multi:h,old_instance:c,new_instance:d}),!0):!1},cut:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.length?(n=e,s=&quot;move_node&quot;,this.trigger(&quot;cut&quot;,{node:e}),void 0):!1},copy:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.length?(n=e,s=&quot;copy_node&quot;,this.trigger(&quot;copy&quot;,{node:e}),void 0):!1},get_buffer:function(){return{mode:s,node:n}},can_paste:function(){return s!==!1&amp;&amp;n!==!1},paste:function(e){return e=this.get_node(e),e&amp;&amp;s&amp;&amp;s.match(/^(copy_node|move_node)$/)&amp;&amp;n?(this[s](n,e),this.trigger(&quot;paste&quot;,{obj:e,nodes:n,mode:s}),n=!1,s=!1,void 0):!1},edit:function(t,n){if(t=this.get_node(t),!t||-1===t||!t.length)return!1;t.parentsUntil(&quot;.jstree&quot;,&quot;.jstree-closed&quot;).each(e.proxy(function(e,t){this.open_node(t,!1,0)},this));var s=this._data.core.rtl,a=this.element.width(),r=t.children(&quot;a:eq(0)&quot;),i=t.children(&quot;i&quot;),o=r.children(&quot;i&quot;),l=i.width()*i.length,c=o.width()*o.length,d=&quot;string&quot;==typeof n?n:this.get_text(t),h=e(&quot;&lt;div /&gt;&quot;,{css:{position:&quot;absolute&quot;,top:&quot;-200px&quot;,left:s?&quot;0px&quot;:&quot;-1000px&quot;,visibility:&quot;hidden&quot;}}).appendTo(&quot;body&quot;),u=t.css(&quot;position&quot;,&quot;relative&quot;).append(e(&quot;&lt;input /&gt;&quot;,{value:d,&quot;class&quot;:&quot;jstree-rename-input&quot;,css:{padding:&quot;0&quot;,border:&quot;1px solid silver&quot;,position:&quot;absolute&quot;,left:s?&quot;auto&quot;:l+c+4+&quot;px&quot;,right:s?l+c+4+&quot;px&quot;:&quot;auto&quot;,top:&quot;0px&quot;,height:this._data.core.li_height-2+&quot;px&quot;,lineHeight:this._data.core.li_height-2+&quot;px&quot;,width:&quot;150px&quot;},blur:e.proxy(function(){var e=t.children(&quot;.jstree-rename-input&quot;),n=e.val();&quot;&quot;===n&amp;&amp;(n=d),h.remove(),e.remove(),this.rename_node(t,n)===!1&amp;&amp;this.rename_node(t,d),t.css(&quot;position&quot;,&quot;&quot;)},this),keydown:function(e){var t=e.keyCode||e.which;27===t&amp;&amp;(this.value=d),(27===t||13===t||37===t||38===t||39===t||40===t)&amp;&amp;e.stopImmediatePropagation(),(27===t||13===t)&amp;&amp;(e.preventDefault(),this.blur())},keyup:function(e){e.keyCode||e.which,u.width(Math.min(h.text(&quot;pW&quot;+this.value).width(),a))},keypress:function(e){var t=e.keyCode||e.which;return 13===t?!1:void 0}})).children(&quot;.jstree-rename-input&quot;),_={fontFamily:r.css(&quot;fontFamily&quot;)||&quot;&quot;,fontSize:r.css(&quot;fontSize&quot;)||&quot;&quot;,fontWeight:r.css(&quot;fontWeight&quot;)||&quot;&quot;,fontStyle:r.css(&quot;fontStyle&quot;)||&quot;&quot;,fontStretch:r.css(&quot;fontStretch&quot;)||&quot;&quot;,fontVariant:r.css(&quot;fontVariant&quot;)||&quot;&quot;,letterSpacing:r.css(&quot;letterSpacing&quot;)||&quot;&quot;,wordSpacing:r.css(&quot;wordSpacing&quot;)||&quot;&quot;};this.set_text(t,&quot;&quot;),h.css(_),u.css(_).width(Math.min(h.text(&quot;pW&quot;+u[0].value).width(),a))[0].select()},set_theme:function(t,n){if(!t)return!1;if(n===!0){var s=this.settings.core.themes.dir;s||(s=e.jstree.path+&quot;/themes&quot;),n=s+&quot;/&quot;+t+&quot;/style.css&quot;}n&amp;&amp;-1===e.inArray(n,a)&amp;&amp;(e(&quot;head&quot;).append(&#39;&lt;link rel=&quot;stylesheet&quot; href=&quot;&#39;+n+&#39;&quot; type=&quot;text/css&quot; /&gt;&#39;),a.push(n)),this._data.core.themes.name&amp;&amp;this.element.removeClass(&quot;jstree-&quot;+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass(&quot;jstree-&quot;+t),this.trigger(&quot;set_theme&quot;,{theme:t})},get_theme:function(){return this._data.core.themes.name},show_dots:function(){this._data.core.themes.dots=!0,this.element.children(&quot;ul&quot;).removeClass(&quot;jstree-no-dots&quot;)},hide_dots:function(){this._data.core.themes.dots=!1,this.element.children(&quot;ul&quot;).addClass(&quot;jstree-no-dots&quot;)},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.element.children(&quot;ul&quot;).removeClass(&quot;jstree-no-icons&quot;)},hide_icons:function(){this._data.core.themes.icons=!1,this.element.children(&quot;ul&quot;).addClass(&quot;jstree-no-icons&quot;)},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(e,t){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.length?(e=e.children(&quot;a&quot;).children(&quot;.jstree-themeicon&quot;),t===!1?this.hide_icon(e):-1===t.indexOf(&quot;/&quot;)?e.addClass(t).attr(&quot;rel&quot;,t):e.css(&quot;background&quot;,&quot;url(&#39;&quot;+t+&quot;&#39;) center center no-repeat&quot;).attr(&quot;rel&quot;,t),!0):!1},get_icon:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.length?(e=e.children(&quot;a&quot;).children(&quot;.jstree-themeicon&quot;),e.hasClass(&quot;jstree-themeicon-hidden&quot;)?!1:(e=e.attr(&quot;rel&quot;),e&amp;&amp;e.length?e:null)):null},hide_icon:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.length?(e.children(&quot;a&quot;).children(&quot;.jstree-themeicon&quot;).addClass(&quot;jstree-themeicon-hidden&quot;),!0):!1},show_icon:function(e){return e=this.get_node(e),e&amp;&amp;-1!==e&amp;&amp;e.length?(e.children(&quot;a&quot;).children(&quot;.jstree-themeicon&quot;).removeClass(&quot;jstree-themeicon-hidden&quot;),!0):!1}};var r=e(&quot;script:last&quot;).attr(&quot;src&quot;);e.jstree.path=r?r.replace(/\/[^\/]+$/,&quot;&quot;):&quot;&quot;,e.jstree.no_css=r&amp;&amp;-1!==r.indexOf(&quot;?no_css&quot;),e.jstree.no_css&amp;&amp;(e.jstree.defaults.core.themes.url=!1),e(function(){var t=&quot;.jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; list-style-image:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree &gt; ul &gt; li { margin-left:0px; } .jstree-rtl &gt; ul &gt; li { margin-right:0px; } .jstree .jstree-icon { display:inline-block; text-decoration:none; margin:0; padding:0; vertical-align:top; } .jstree .jstree-ocl { width:18px; height:18px; text-align:center; line-height:18px; cursor:pointer; vertical-align:top; } .jstree li.jstree-open &gt; ul { display:block; } .jstree li.jstree-closed &gt; ul { display:none; } .jstree-anchor { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; padding:1px 4px 1px 2px; margin:0; text-decoration:none; outline:0; } .jstree-anchor &gt; .jstree-themeicon { height:16px; width:16px; margin-right:3px; } .jstree-rtl .jstree-anchor { padding:1px 2px 1px 4px; } .jstree-rtl .jstree-anchor &gt; .jstree-themeicon { margin-left:3px; margin-right:0; } .jstree-no-icons .jstree-themeicon, .jstree-anchor &gt; .jstree-themeicon-hidden { display:none; } &quot;;e.jstree.no_css||e(&quot;head&quot;).append(&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;+t+&quot;&lt;&quot;+&quot;/style&gt;&quot;)}),e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var s=n?{}:[];return e.each(t.attributes,function(t,a){-1===e.inArray(a.nodeName.toLowerCase(),[&quot;style&quot;,&quot;contenteditable&quot;,&quot;hasfocus&quot;,&quot;tabindex&quot;])&amp;&amp;null!==a.nodeValue&amp;&amp;&quot;&quot;!==e.trim(a.nodeValue)&amp;&amp;(n?s[a.nodeName]=a.nodeValue:s.push(a.nodeName))}),s},e.vakata.array_remove=function(e,t,n){var s=e.slice((n||t)+1||e.length);return e.length=0&gt;t?e.length+t:t,e.push.apply(e,s),e};var i=function(e){var t=/[&quot;\\\x00-\x1f\x7f-\x9f]/g,n={&quot;\b&quot;:&quot;\\b&quot;,&quot;	&quot;:&quot;\\t&quot;,&quot;\n&quot;:&quot;\\n&quot;,&quot;\f&quot;:&quot;\\f&quot;,&quot;\r&quot;:&quot;\\r&quot;,&#39;&quot;&#39;:&#39;\\&quot;&#39;,&quot;\\&quot;:&quot;\\\\&quot;};return e.match(t)?&#39;&quot;&#39;+e.replace(t,function(e){var t=n[e];return&quot;string&quot;==typeof t?t:(t=e.charCodeAt(),&quot;\\u00&quot;+Math.floor(t/16).toString(16)+(t%16).toString(16))})+&#39;&quot;&#39;:&#39;&quot;&#39;+e+&#39;&quot;&#39;};e.vakata.json={encode:function(t){if(null===t)return&quot;null&quot;;var n,s=[];switch(typeof t){case&quot;undefined&quot;:return void 0;case&quot;number&quot;:case&quot;boolean&quot;:return t+&quot;&quot;;case&quot;string&quot;:return i(t);case&quot;object&quot;:if(e.isFunction(t.toJSON))return e.vakata.json.encode(t.toJSON());if(t.constructor===Date)return&#39;&quot;&#39;+t.getUTCFullYear()+&quot;-&quot;+(&quot;0&quot;+(t.getUTCMonth()+1)+&quot;&quot;).slice(-2)+&quot;-&quot;+(&quot;0&quot;+t.getUTCDate()+&quot;&quot;).slice(-2)+&quot;T&quot;+(&quot;0&quot;+t.getUTCHours()+&quot;&quot;).slice(-2)+&quot;:&quot;+(&quot;0&quot;+t.getUTCMinutes()+&quot;&quot;).slice(-2)+&quot;:&quot;+(&quot;0&quot;+t.getUTCSeconds()+&quot;&quot;).slice(-2)+&quot;.&quot;+(&quot;00&quot;+t.getUTCMilliseconds()+&quot;&quot;).slice(-3)+&#39;Z&quot;&#39;;if(t.constructor===Array){for(n=0;t.length&gt;n;n++)s.push(e.vakata.json.encode(t[n])||&quot;null&quot;);return&quot;[&quot;+s.join(&quot;,&quot;)+&quot;]&quot;}return e.each(t,function(t,n){return e.isFunction(n)?!0:(t=&quot;number&quot;==typeof t?&#39;&quot;&#39;+t+&#39;&quot;&#39;:i(t),n=e.vakata.json.encode(n),s.push(t+&quot;:&quot;+n),void 0)}),&quot;{&quot;+s.join(&quot;, &quot;)+&quot;}&quot;}},decode:function(t){return e.parseJSON(t)</div><div class='line' id='LC3'>}}}})(jQuery),function(e){e.jstree.defaults.checkbox={three_state:!0,whole_node:!1,keep_selected_style:!0,icons:!0,parse_data:!0},e.jstree.plugins.checkbox=function(t,n){this.bind=function(){n.bind.call(this),this.element.on(&quot;init.jstree&quot;,e.proxy(function(){this._data.checkbox.icons=this.settings.checkbox.icons},this)).on(&quot;loaded.jstree&quot;,e.proxy(function(){this[this._data.checkbox.icons?&quot;show_checkboxes&quot;:&quot;hide_checkboxes&quot;]()},this)),this.settings.checkbox.keep_selected_style||this.element.addClass(&quot;jstree-checkbox-no-clicked&quot;),this.settings.checkbox.three_state&amp;&amp;this.element.on(&quot;ready.jstree&quot;,e.proxy(function(){var t=!1,n=this.get_selected(),s=n.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;).end().find(&quot;.jstree-anchor:not(.jstree-clicked)&quot;);s.length&amp;&amp;(t=!0,this.select_node(s,!0,!0)),n.each(e.proxy(function(n,s){t=t||this.check_up(e(s).parent())},this)),t&amp;&amp;this.trigger(&quot;changed&quot;,{action:&quot;checkbox_three_state&quot;,selected:this._data.core.selected}),this.settings.json&amp;&amp;this.settings.json.progressive_render&amp;&amp;this.settings.checkbox.three_state&amp;&amp;this.element.on(&quot;deselect_all.jstree select_node.jstree deselect_node.jstree&quot;,e.proxy(function(t,n){n.node.filter(&quot;.jstree-closed&quot;).each(e.proxy(function(n,s){var a=e(s),r=a.data(&quot;jstree&quot;);r&amp;&amp;r.children&amp;&amp;0===a.children(&quot;ul&quot;).length&amp;&amp;this._progressive_data_clean(r.children,&quot;select_node&quot;===t.type)},this))},this))},this)).on(&quot;deselect_all.jstree&quot;,e.proxy(function(){this.element.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;)},this)).on(&quot;open_node.jstree&quot;,e.proxy(function(e,t){if(t.node&amp;&amp;-1!==t.node){var n;this.is_selected(t.node)?(n=t.node.find(&quot;.jstree-anchor&quot;).not(&quot;.jstree-clicked&quot;),n.length&amp;&amp;this.select_node(n,!0,!0)):this.check_up(t.node)&amp;&amp;this.trigger(&quot;changed&quot;,{action:&quot;checkbox_three_state&quot;,selected:this._data.core.selected})}},this)).on(&quot;changed.jstree&quot;,e.proxy(function(e,t){var n,s=t.action||&quot;&quot;,a=!1,r=!1;switch(s){case&quot;select_node&quot;:a=t.node.parent(),n=t.node.find(&quot;.jstree-anchor:not(.jstree-clicked)&quot;),n.length&amp;&amp;(r=!0,this.select_node(n,!0,!0)),t.node.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;);break;case&quot;deselect_node&quot;:a=t.node.parent(),n=t.node.find(&quot;.jstree-clicked&quot;),n.length&amp;&amp;(r=!0,this.deselect_node(n,!0)),t.node.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;);break;case&quot;deselect_all&quot;:this.element.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;);break;case&quot;delete_node&quot;:a=t.parent;break;default:}a&amp;&amp;this.check_up(a)&amp;&amp;(r=!0),r&amp;&amp;this.trigger(&quot;changed&quot;,{action:&quot;checkbox_three_state&quot;,selected:this._data.core.selected})},this)).on(&quot;move_node.jstree copy_node.jstree&quot;,e.proxy(function(e,t){t.old_instance&amp;&amp;t.old_instance.check_up&amp;&amp;t.old_instance.check_up(t.old_parent)&amp;&amp;t.old_instance.trigger(&quot;changed&quot;,{action:&quot;checkbox_three_state&quot;,selected:t.old_instance._data.core.selected}),t.new_instance&amp;&amp;t.new_instance.check_up&amp;&amp;t.new_instance.check_up(t.parent)&amp;&amp;t.new_instance.trigger(&quot;changed&quot;,{action:&quot;checkbox_three_state&quot;,selected:t.new_instance._data.core.selected})},this))},this._progressive_data_clean=function(e,t){if(!this.settings.checkbox.three_state)return!1;for(var n=0,s=e.length;s&gt;n;n++)e[n].data&amp;&amp;e[n].data.jstree&amp;&amp;(e[n].data.jstree.selected&amp;&amp;delete e[n].data.jstree.selected,e[n].data.jstree.undetermined&amp;&amp;delete e[n].data.jstree.undetermined,e[n].children&amp;&amp;this._progressive_data_clean(e[n].children,t))},this._set_state=function(t){var n=0,s=0,a=0,r=!1;if(e.isArray(t)){for(n=0,s=t.length;s&gt;n;n++)t[n]=this._set_state(t[n]);return t}if(t===void 0&amp;&amp;(t={}),&quot;string&quot;==typeof t&amp;&amp;(t={title:t}),t.data||(t.data={}),t.data.jstree||(t.data.jstree={}),r=t.data.jstree,r.selected||r.undetermined||r._checkboxed)return t;if(r._checkboxed=!0,t.children&amp;&amp;t.children.length){for(n=0,s=t.children.length;s&gt;n;n++)t.children[n]=this._set_state(t.children[n]),r=t.children[n].data.jstree,r.selected?a+=2:r.undetermined&amp;&amp;(a+=1);a&gt;0&amp;&amp;(a===2*s?t.data.jstree.selected=!0:t.data.jstree.undetermined=!0)}return t},this.parse_json=function(t){var s=this.settings.checkbox;return s.parse_data&amp;&amp;s.three_state&amp;&amp;e.isArray(t)&amp;&amp;(t=this._set_state(t)),n.parse_json.call(this,t)},this.clean_node=function(t){return t=n.clean_node.call(this,t),t.each(function(){var t=e(this),n=t.data(&quot;jstree&quot;),s=t.children(&quot;a&quot;);s.children(&quot;i.jstree-checkbox&quot;).length||s.prepend(&quot;&lt;i class=&#39;jstree-icon jstree-checkbox&#39;&gt;&lt;/i&gt;&quot;),n&amp;&amp;n.undetermined&amp;&amp;(s.parentsUntil(&quot;.jstree&quot;,&quot;li&quot;).children(&quot;a.jstree-anchor&quot;).children(&quot;i.jstree-checkbox&quot;).addClass(&quot;jstree-undetermined&quot;),delete n.undetermined)})},this.get_json=function(e,t){var s=n.get_json.call(this,e,t);return t&amp;&amp;e.children(&quot;.jstree-anchor&quot;).children(&quot;.jstree-undetermined&quot;).length&amp;&amp;(s.data.jstree.undetermined=!0),s},this.activate_node=function(t,s){(this.settings.checkbox.whole_node||e(s.target).hasClass(&quot;jstree-checkbox&quot;))&amp;&amp;(s.ctrlKey=!0),n.activate_node.call(this,t,s)},this.check_up=function(e){if(!this.settings.checkbox.three_state)return!1;if(e=this.get_node(e),-1===e||!e||!e.length)return!1;var t=0,n=e.children(&quot;ul&quot;).children(&quot;li&quot;).length&gt;0,s=n&amp;&amp;0===e.children(&quot;ul&quot;).children(&quot;li&quot;).not(this._data.core.selected).length,a=n&amp;&amp;0===e.find(&quot;li &gt; .jstree-clicked, li &gt; .jstree-anchor &gt; .jstree-undetermined&quot;).length;if(!t&amp;&amp;this.is_selected(e)&amp;&amp;(t=1),!t&amp;&amp;e.children(&quot;.jstree-anchor&quot;).children(&quot;.jstree-undetermined&quot;).length&amp;&amp;(t=2),!n)return 2===t&amp;&amp;e.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;),!1;if(s)return 1!==t&amp;&amp;(e.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;),this.select_node(e,!0),this.check_up(e.parent())),!0;if(a)return 2===t?(e.find(&quot;.jstree-undetermined&quot;).removeClass(&quot;jstree-undetermined&quot;),this.check_up(e.parent()),!1):1===t?(this.deselect_node(e,!0),this.check_up(e.parent()),!0):!1;if(1===t)return e.children(&quot;.jstree-anchor&quot;).children(&quot;.jstree-checkbox&quot;).addClass(&quot;jstree-undetermined&quot;),this.deselect_node(e,!0),this.check_up(e.parent()),!0;if(0===t){var r=e.children(&quot;.jstree-anchor&quot;).children(&quot;.jstree-checkbox&quot;);r.hasClass(&quot;jstree-undetermined&quot;)||(e.children(&quot;.jstree-anchor&quot;).children(&quot;.jstree-checkbox&quot;).addClass(&quot;jstree-undetermined&quot;),this.check_up(e.parent()))}return!1},this.show_checkboxes=function(){this._data.checkbox.icons=!0,this.element.children(&quot;ul&quot;).removeClass(&quot;jstree-no-checkboxes&quot;)},this.hide_checkboxes=function(){this._data.checkbox.icons=!1,this.element.children(&quot;ul&quot;).addClass(&quot;jstree-no-checkboxes&quot;)},this.toggle_checkboxes=function(){this._data.checkbox.icons?this.hide_checkboxes():this.show_checkboxes()}},e(function(){var t=&quot;.jstree-anchor &gt; .jstree-checkbox { height:16px; width:16px; margin-right:1px; } .jstree-rtl .jstree-anchor &gt; .jstree-checkbox { margin-right:0; margin-left:1px; } &quot;;e.jstree.no_css||e(&quot;head&quot;).append(&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;+t+&quot;&lt;/style&gt;&quot;)}),e.jstree.defaults.plugins.push(&quot;checkbox&quot;)}(jQuery),function(e){e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(){return{create:{separator_before:!1,separator_after:!0,label:&quot;Create&quot;,action:function(t){var n=e.jstree.reference(t.reference),s=n.get_node(t.reference);n.create_node(s,{},&quot;last&quot;,function(e){setTimeout(function(){n.edit(e)},0)})}},rename:{separator_before:!1,separator_after:!1,label:&quot;Rename&quot;,action:function(t){var n=e.jstree.reference(t.reference),s=n.get_node(t.reference);n.edit(s)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:&quot;Delete&quot;,action:function(t){var n=e.jstree.reference(t.reference),s=n.get_node(t.reference);n.delete_node(s)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:&quot;Edit&quot;,action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:&quot;Cut&quot;,action:function(t){var n=e.jstree.reference(t.reference),s=n.get_node(t.reference);n.cut(s)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:&quot;Copy&quot;,action:function(t){var n=e.jstree.reference(t.reference),s=n.get_node(t.reference);n.copy(s)}},paste:{separator_before:!1,icon:!1,_disabled:!this.can_paste(),separator_after:!1,label:&quot;Paste&quot;,action:function(t){var n=e.jstree.reference(t.reference),s=n.get_node(t.reference);n.paste(s)}}}}}}},e.jstree.plugins.contextmenu=function(t,n){this.bind=function(){n.bind.call(this),this.element.on(&quot;contextmenu.jstree&quot;,&quot;a&quot;,e.proxy(function(e){e.preventDefault(),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY)},this)).on(&quot;click.jstree&quot;,&quot;a&quot;,e.proxy(function(){this._data.contextmenu.visible&amp;&amp;e.vakata.context.hide()},this)),e(document).on(&quot;context_hide.vakata&quot;,e.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&amp;&amp;e.vakata.context.hide(),n.teardown.call(this)},this.show_contextmenu=function(t,n,s){t=this.get_node(t);var a=this.settings.contextmenu,r=t.children(&quot;a:visible:eq(0)&quot;),i=!1,o=!1;(a.show_at_node||n===void 0||s===void 0)&amp;&amp;(i=r.offset(),n=i.left,s=i.top+this._data.core.li_height),this.is_selected(t)||(this.deselect_all(),this.select_node(t)),o=t.data(&quot;jstree&quot;)&amp;&amp;t.data(&quot;jstree&quot;).contextmenu?t.data(&quot;jstree&quot;).contextmenu:a.items,e.isFunction(o)&amp;&amp;(o=o.call(this,t)),e(document).one(&quot;context_show.vakata&quot;,e.proxy(function(t,n){var s=&quot;jstree-contextmenu jstree-&quot;+this.get_theme()+&quot;-contextmenu&quot;;e(n.element).addClass(s)},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(r,{x:n,y:s},o),this.trigger(&quot;show_contextmenu&quot;,{node:t,x:n,y:s})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:&quot;&quot;,is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(document).triggerHandler(&quot;context_&quot;+t+&quot;.vakata&quot;,{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(e){return e=n.items[e],e&amp;&amp;!e._disabled&amp;&amp;e.action?e.action.call(null,{item:e,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}}):!1},_parse:function(t,s){if(!t)return!1;s||(n.html=&quot;&quot;,n.items=[]);var a,r=&quot;&quot;,i=!1;return s&amp;&amp;(r+=&quot;&lt;ul&gt;&quot;),e.each(t,function(t,s){return s?(n.items.push(s),!i&amp;&amp;s.separator_before&amp;&amp;(r+=&quot;&lt;li class=&#39;vakata-context-separator&#39;&gt;&lt;a href=&#39;#&#39; &quot;+(e.vakata.context.settings.icons?&quot;&quot;:&#39;style=&quot;margin-left:0px;&quot;&#39;)+&quot;&gt;&amp;#160;&lt;&quot;+&quot;/a&gt;&lt;&quot;+&quot;/li&gt;&quot;),i=!1,r+=&quot;&lt;li class=&#39;&quot;+(s._class||&quot;&quot;)+(s._disabled?&quot; vakata-contextmenu-disabled &quot;:&quot;&quot;)+&quot;&#39;&gt;&quot;,r+=&quot;&lt;a href=&#39;#&#39; rel=&#39;&quot;+(n.items.length-1)+&quot;&#39;&gt;&quot;,e.vakata.context.settings.icons&amp;&amp;(r+=&quot;&lt;ins &quot;,s.icon&amp;&amp;(r+=-1!==s.icon.indexOf(&quot;/&quot;)?&quot; style=&#39;background:url(\&quot;&quot;+s.icon+&quot;\&quot;) center center no-repeat&#39; &quot;:&quot; class=&#39;&quot;+s.icon+&quot;&#39; &quot;),r+=&quot;&gt;&amp;#160;&lt;/ins&gt;&lt;span&gt;&amp;#160;&lt;/span&gt;&quot;),r+=s.label+&quot;&lt;&quot;+&quot;/a&gt;&quot;,s.submenu&amp;&amp;(a=e.vakata.context._parse(s.submenu,!0),a&amp;&amp;(r+=a)),r+=&quot;&lt;/li&gt;&quot;,s.separator_after&amp;&amp;(r+=&quot;&lt;li class=&#39;vakata-context-separator&#39;&gt;&lt;a href=&#39;#&#39; &quot;+(e.vakata.context.settings.icons?&quot;&quot;:&#39;style=&quot;margin-left:0px;&quot;&#39;)+&quot;&gt;&amp;#160;&lt;&quot;+&quot;/a&gt;&lt;&quot;+&quot;/li&gt;&quot;,i=!0),void 0):!0}),r=r.replace(/&lt;li class\=&#39;vakata-context-separator&#39;\&gt;&lt;\/li\&gt;$/,&quot;&quot;),s&amp;&amp;(r+=&quot;&lt;/ul&gt;&quot;),s||(n.html=r,e.vakata.context._trigger(&quot;parse&quot;)),r.length&gt;10?r:!1},_show_submenu:function(n){if(n=e(n),n.length&amp;&amp;n.children(&quot;ul&quot;).length){var s=n.children(&quot;ul&quot;),a=n.offset().left+n.outerWidth(),r=n.offset().top,i=s.width(),o=s.height(),l=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?n[0&gt;a-(i+10+n.outerWidth())?&quot;addClass&quot;:&quot;removeClass&quot;](&quot;vakata-context-left&quot;):n[a+i+10&gt;l?&quot;addClass&quot;:&quot;removeClass&quot;](&quot;vakata-context-right&quot;),r+o+10&gt;c&amp;&amp;s.css(&quot;bottom&quot;,&quot;-1px&quot;),s.show()}},show:function(s,a,r){switch(n.element&amp;&amp;n.element.length&amp;&amp;n.element.width(&quot;&quot;),!0){case!a&amp;&amp;!s:return!1;case!!a&amp;&amp;!!s:n.reference=s,n.position_x=a.x,n.position_y=a.y;break;case!a&amp;&amp;!!s:n.reference=s;var i=s.offset();n.position_x=i.left+s.outerHeight(),n.position_y=i.top;break;case!!a&amp;&amp;!s:n.position_x=a.x,n.position_y=a.y}if(s&amp;&amp;!r&amp;&amp;e(s).data(&quot;vakata_contextmenu&quot;)&amp;&amp;(r=e(s).data(&quot;vakata_contextmenu&quot;)),e.vakata.context._parse(r)&amp;&amp;n.element.html(n.html),n.items.length){var o=n.element,l=n.position_x,c=n.position_y,d=o.width(),h=o.height(),u=e(window).width()+e(window).scrollLeft(),_=e(window).height()+e(window).scrollTop();t&amp;&amp;(l-=o.outerWidth(),e(window).scrollLeft()+20&gt;l&amp;&amp;(l=e(window).scrollLeft()+20)),l+d+20&gt;u&amp;&amp;(l=u-(d+20)),c+h+20&gt;_&amp;&amp;(c=_-(h+20)),n.element.css({left:l,top:c}).show().find(&quot;a:eq(0)&quot;).focus().parent().addClass(&quot;vakata-context-hover&quot;),n.is_visible=!0,e.vakata.context._trigger(&quot;show&quot;)}},hide:function(){n.is_visible&amp;&amp;(n.element.hide().find(&quot;ul&quot;).hide().end().find(&quot;:focus&quot;).blur(),n.is_visible=!1,e.vakata.context._trigger(&quot;hide&quot;))}},e(function(){t=&quot;rtl&quot;===e(&quot;body&quot;).css(&quot;direction&quot;);var s=!1,a=&#39;.vakata-context { display:none; _width:1px; } .vakata-context, .vakata-context ul { margin:0; padding:2px; position:absolute; background:#f5f5f5; border:1px solid #979797; 	-moz-box-shadow:5px 5px 4px -4px #666666; -webkit-box-shadow:2px 2px 2px #999999; box-shadow:2px 2px 2px #999999; }.vakata-context ul { list-style:none; left:100%; margin-top:-2.7em; margin-left:-4px; } .vakata-context li.vakata-context-right ul { left:auto; right:100%; margin-left:auto; margin-right:-4px; } .vakata-context li { list-style:none; display:inline; }.vakata-context li a { display:block; padding:0 2em 0 2em; text-decoration:none; width:auto; color:black; white-space:nowrap; line-height:2.4em; 	-moz-text-shadow:1px 1px 0px white; -webkit-text-shadow:1px 1px 0px white; text-shadow:1px 1px 0px white; 	-moz-border-radius:1px; -webkit-border-radius:1px; border-radius:1px; }.vakata-context li a:hover { position:relative; background-color:#e8eff7; 	-moz-box-shadow:0px 0px 2px #0a6aa1; -webkit-box-shadow:0px 0px 2px #0a6aa1; box-shadow:0px 0px 2px #0a6aa1; }.vakata-context li.vakata-context-hover &gt; a { position:relative; background-color:#e8eff7; 	-moz-box-shadow:0px 0px 2px #0a6aa1; -webkit-box-shadow:0px 0px 2px #0a6aa1; box-shadow:0px 0px 2px #0a6aa1; }.vakata-context li a.vakata-context-parent { background-image:url(&quot;data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw==&quot;); background-position:right center; background-repeat:no-repeat; } .vakata-context li.vakata-context-separator a, .vakata-context li.vakata-context-separator a:hover { background:white; border:0; border-top:1px solid #e2e3e3; height:1px; min-height:1px; max-height:1px; padding:0; margin:0 0 0 2.4em; border-left:1px solid #e0e0e0; _overflow:hidden; 	-moz-text-shadow:0 0 0 transparent; -webkit-text-shadow:0 0 0 transparent; text-shadow:0 0 0 transparent; 	-moz-box-shadow:0 0 0 transparent; -webkit-box-shadow:0 0 0 transparent; box-shadow:0 0 0 transparent; 	-moz-border-radius:0; -webkit-border-radius:0; border-radius:0; }.vakata-context li.vakata-contextmenu-disabled a, .vakata-context li.vakata-contextmenu-disabled a:hover { color:silver; background-color:transparent; border:0; box-shadow:0 0 0; }.vakata-context li a ins { text-decoration:none; display:inline-block; width:2.4em; height:2.4em; background:transparent; margin:0 0 0 -2em; } .vakata-context li a span { display:inline-block; width:1px; height:2.4em; background:white; margin:0 0.5em 0 0; border-left:1px solid #e2e3e3; _overflow:hidden; } .vakata-context-rtl ul { left:auto; right:100%; margin-left:auto; margin-right:-4px; } .vakata-context-rtl li a.vakata-context-parent { background-image:url(&quot;data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7&quot;); background-position:left center; background-repeat:no-repeat; } .vakata-context-rtl li.vakata-context-separator a { margin:0 2.4em 0 0; border-left:0; border-right:1px solid #e2e3e3;} .vakata-context-rtl li.vakata-context-left ul { right:auto; left:100%; margin-left:-4px; margin-right:auto; } .vakata-context-rtl li a ins { margin:0 -2em 0 0; } .vakata-context-rtl li a span { margin:0 0 0 0.5em; border-left-color:white; background:#e2e3e3; } &#39;;e.jstree.no_css||e(&quot;head&quot;).append(&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;+a+&quot;&lt;/style&gt;&quot;),n.element=e(&quot;&lt;ul class=&#39;vakata-context&#39;&gt;&lt;/ul&gt;&quot;),n.element.on(&quot;mouseenter&quot;,&quot;li&quot;,function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(s&amp;&amp;clearTimeout(s),n.element.find(&quot;.vakata-context-hover&quot;).removeClass(&quot;vakata-context-hover&quot;).end(),e(this).siblings().find(&quot;ul&quot;).hide().end().end().parentsUntil(&quot;.vakata-context&quot;,&quot;li&quot;).addBack().addClass(&quot;vakata-context-hover&quot;),e.vakata.context._show_submenu(this))}).on(&quot;mouseleave&quot;,&quot;li&quot;,function(t){e.contains(this,t.relatedTarget)||e(this).find(&quot;.vakata-context-hover&quot;).addBack().removeClass(&quot;vakata-context-hover&quot;)}).on(&quot;mouseleave&quot;,function(){e(this).find(&quot;.vakata-context-hover&quot;).removeClass(&quot;vakata-context-hover&quot;),e.vakata.context.settings.hide_onmouseleave&amp;&amp;(s=setTimeout(function(){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on(&quot;click&quot;,&quot;a&quot;,function(e){e.preventDefault()}).on(&quot;mouseup&quot;,&quot;a&quot;,function(){e(this).blur().parent().hasClass(&quot;vakata-context-disabled&quot;)||e.vakata.context._execute(e(this).attr(&quot;rel&quot;))===!1||e.vakata.context.hide()}).on(&quot;keydown&quot;,&quot;a&quot;,function(t){var s=null;switch(t.which){case 13:case 32:t.type=&quot;mouseup&quot;,t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&amp;&amp;(n.element.find(&quot;.vakata-context-hover&quot;).last().parents(&quot;li:eq(0)&quot;).find(&quot;ul&quot;).hide().find(&quot;.vakata-context-hover&quot;).removeClass(&quot;vakata-context-hover&quot;).end().end().children(&quot;a&quot;).focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&amp;&amp;(s=n.element.find(&quot;ul:visible&quot;).addBack().last().children(&quot;.vakata-context-hover&quot;).removeClass(&quot;vakata-context-hover&quot;).prevAll(&quot;li:not(.vakata-context-separator)&quot;).first(),s.length||(s=n.element.find(&quot;ul:visible&quot;).addBack().last().children(&quot;li:not(.vakata-context-separator)&quot;).last()),s.addClass(&quot;vakata-context-hover&quot;).children(&quot;a&quot;).focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&amp;&amp;(n.element.find(&quot;.vakata-context-hover&quot;).last().children(&quot;ul&quot;).show().children(&quot;li:not(.vakata-context-separator)&quot;).removeClass(&quot;vakata-context-hover&quot;).first().addClass(&quot;vakata-context-hover&quot;).children(&quot;a&quot;).focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&amp;&amp;(s=n.element.find(&quot;ul:visible&quot;).addBack().last().children(&quot;.vakata-context-hover&quot;).removeClass(&quot;vakata-context-hover&quot;).nextAll(&quot;li:not(.vakata-context-separator)&quot;).first(),s.length||(s=n.element.find(&quot;ul:visible&quot;).addBack().last().children(&quot;li:not(.vakata-context-separator)&quot;).first()),s.addClass(&quot;vakata-context-hover&quot;).children(&quot;a&quot;).focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault();break;default:}}).appendTo(&quot;body&quot;),e(document).on(&quot;mousedown&quot;,function(t){n.is_visible&amp;&amp;!e.contains(n.element[0],t.target)&amp;&amp;e.vakata.context.hide()}).on(&quot;context_show.vakata&quot;,function(){n.element.find(&quot;li:has(ul)&quot;).children(&quot;a&quot;).addClass(&quot;vakata-context-parent&quot;),t&amp;&amp;n.element.addClass(&quot;vakata-context-rtl&quot;).css(&quot;direction&quot;,&quot;rtl&quot;),n.element.find(&quot;ul&quot;).hide().end()})})}(e),e.jstree.defaults.plugins.push(&quot;contextmenu&quot;)}(jQuery),function(e){e.jstree.defaults.dnd={copy:!0,open_timeout:500},e.jstree.plugins.dnd=function(t,n){this.bind=function(){n.bind.call(this),this.element.on(&quot;mousedown&quot;,&quot;a&quot;,e.proxy(function(t){var n=this.get_node(t.target);return n&amp;&amp;-1!==n&amp;&amp;n.length&amp;&amp;1===t.which?(this.element.trigger(&quot;mousedown.jstree&quot;),e.vakata.dnd.start(t,{jstree:!0,origin:this,obj:n},&#39;&lt;div id=&quot;jstree-dnd&quot; class=&quot;jstree-&#39;+this.get_theme()+&#39;&quot;&gt;&lt;i class=&quot;jstree-icon jstree-er&quot;&gt;&lt;/i&gt;&#39;+this.get_text(t.currentTarget,!0)+&#39;&lt;ins class=&quot;jstree-copy&quot; style=&quot;display:none;&quot;&gt;+&lt;/ins&gt;&lt;/div&gt;&#39;)):void 0},this))}},e(function(){var t=!1,n=!1,s=e(&#39;&lt;div id=&quot;jstree-marker&quot;&gt;&amp;#160;&lt;/div&gt;&#39;).hide().appendTo(&quot;body&quot;);e(document).bind(&quot;dnd_start.vakata&quot;,function(){t=!1}).bind(&quot;dnd_move.vakata&quot;,function(a,r){if(n&amp;&amp;clearTimeout(n),r.data.jstree&amp;&amp;(!r.event.target.id||&quot;jstree-marker&quot;!==r.event.target.id)){var i,o,l,c,d,h,u=e.jstree.reference(r.event.target),_=!1,p=!1,g=!1;if(u&amp;&amp;u._data&amp;&amp;u._data.dnd)if(s.attr(&quot;class&quot;,&quot;jstree-&quot;+u.get_theme()),r.helper.children().attr(&quot;class&quot;,&quot;jstree-&quot;+u.get_theme()).find(&quot;.jstree-copy:eq(0)&quot;)[r.data.origin.settings.dnd.copy&amp;&amp;(r.event.metaKey||r.event.ctrlKey)?&quot;show&quot;:&quot;hide&quot;](),r.event.target===u.element[0]||r.event.target===u.get_container_ul()[0]){if(u.check(r.data.origin.settings.dnd.copy&amp;&amp;(r.event.metaKey||r.event.ctrlKey)?&quot;copy_node&quot;:&quot;move_node&quot;,r.data.obj,-1,&quot;last&quot;))return t={ins:u,par:-1,pos:&quot;last&quot;},s.hide(),r.helper.find(&quot;.jstree-icon:eq(0)&quot;).removeClass(&quot;jstree-er&quot;).addClass(&quot;jstree-ok&quot;),void 0}else if(_=e(r.event.target).closest(&quot;a&quot;),_&amp;&amp;_.length&amp;&amp;_.parent().is(&quot;.jstree-closed, .jstree-open, .jstree-leaf&quot;)&amp;&amp;(p=_.offset(),g=r.event.pageY-p.top,l=_.height(),h=l/3&gt;g?[&quot;b&quot;,&quot;i&quot;,&quot;a&quot;]:g&gt;l-l/3?[&quot;a&quot;,&quot;i&quot;,&quot;b&quot;]:g&gt;l/2?[&quot;i&quot;,&quot;a&quot;,&quot;b&quot;]:[&quot;i&quot;,&quot;b&quot;,&quot;a&quot;],e.each(h,function(e,a){switch(a){case&quot;b&quot;:i=p.left-6,o=p.top-5,c=u.get_parent(_),d=_.parent().index();break;case&quot;i&quot;:i=p.left-2,o=p.top-5+l/2+1,c=_.parent(),d=0;break;case&quot;a&quot;:i=p.left-6,o=p.top-5+l+2,c=u.get_parent(_),d=_.parent().index()+1}return u.check(r.data.origin.settings.dnd.copy&amp;&amp;(r.event.metaKey||r.event.ctrlKey)?&quot;copy_node&quot;:&quot;move_node&quot;,r.data.obj,c,d)?(&quot;i&quot;===a&amp;&amp;_.parent().is(&quot;.jstree-closed&quot;)&amp;&amp;u.settings.dnd.open_timeout&amp;&amp;(n=setTimeout(function(e,t){return function(){e.open_node(t)}}(u,_),u.settings.dnd.open_timeout)),t={ins:u,par:c,pos:d},s.css({left:i+&quot;px&quot;,top:o+&quot;px&quot;}).show(),r.helper.find(&quot;.jstree-icon:eq(0)&quot;).removeClass(&quot;jstree-er&quot;).addClass(&quot;jstree-ok&quot;),h=!0,!1):void 0}),h===!0))return;t=!1,r.helper.find(&quot;.jstree-icon&quot;).removeClass(&quot;jstree-ok&quot;).addClass(&quot;jstree-er&quot;),s.hide()}}).bind(&quot;dnd_scroll.vakata&quot;,function(e,n){n.data.jstree&amp;&amp;(s.hide(),t=!1,n.helper.find(&quot;.jstree-icon:eq(0)&quot;).removeClass(&quot;jstree-ok&quot;).addClass(&quot;jstree-er&quot;))}).bind(&quot;dnd_stop.vakata&quot;,function(e,a){n&amp;&amp;clearTimeout(n),a.data.jstree&amp;&amp;(s.hide(),t&amp;&amp;t.ins[a.data.origin.settings.dnd.copy&amp;&amp;(a.event.metaKey||a.event.ctrlKey)?&quot;copy_node&quot;:&quot;move_node&quot;](a.data.obj,t.par,t.pos))}).bind(&quot;keyup keydown&quot;,function(t,n){n=e.vakata.dnd._get(),n.data&amp;&amp;n.data.jstree&amp;&amp;n.helper.find(&quot;.jstree-copy:eq(0)&quot;)[n.data.origin.settings.dnd.copy&amp;&amp;(t.metaKey||t.ctrlKey)?&quot;show&quot;:&quot;hide&quot;]()});var a=&quot;#jstree-marker { position: absolute; top:0; left:0; margin:0; padding:0; border-right:0; border-top:5px solid transparent; border-bottom:5px solid transparent; border-left:5px solid; width:0; height:0; font-size:0; line-height:0; _border-top-color:pink; _border-botton-color:pink; _filter:chroma(color=pink); } #jstree-dnd { line-height:16px; margin:0; padding:4px; } #jstree-dnd .jstree-icon, #jstree-dnd .jstree-copy { display:inline-block; text-decoration:none; margin:0 2px 0 0; padding:0; width:16px; height:16px; } #jstree-dnd .jstree-ok { background:green; } #jstree-dnd .jstree-er { background:red; } #jstree-dnd .jstree-copy { margin:0 2px 0 2px; }&quot;;e.jstree.no_css||e(&quot;head&quot;).append(&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;+a+&quot;&lt;/style&gt;&quot;)}),e.jstree.defaults.plugins.push(&quot;dnd&quot;)}(jQuery),function(e){e.fn.vakata_reverse=[].reverse;var t={element:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5},_trigger:function(t,n){var s=e.vakata.dnd._get();s.event=n,e(document).triggerHandler(&quot;dnd_&quot;+t+&quot;.vakata&quot;,s)},_get:function(){return{data:t.data,element:t.element,helper:t.helper}},_clean:function(){t.helper&amp;&amp;t.helper.remove(),t.scroll_i&amp;&amp;(clearInterval(t.scroll_i),t.scroll_i=!1),t={element:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1},e(document).unbind(&quot;mousemove&quot;,e.vakata.dnd.drag),e(document).unbind(&quot;mouseup&quot;,e.vakata.dnd.stop)},_scroll:function(n){if(!t.scroll_e||!t.scroll_l&amp;&amp;!t.scroll_t)return t.scroll_i&amp;&amp;(clearInterval(t.scroll_i),t.scroll_i=!1),!1;if(!t.scroll_i)return t.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(n===!0)return!1;var s=t.scroll_e.scrollTop(),a=t.scroll_e.scrollLeft();t.scroll_e.scrollTop(s+t.scroll_t*e.vakata.dnd.settings.scroll_speed),t.scroll_e.scrollLeft(a+t.scroll_l*e.vakata.dnd.settings.scroll_speed),(s!==t.scroll_e.scrollTop()||a!==t.scroll_e.scrollLeft())&amp;&amp;e.vakata.dnd._trigger(&quot;scroll&quot;,t.scroll_e)},start:function(n,s,a){t.is_drag&amp;&amp;e.vakata.dnd.stop({});try{n.currentTarget.unselectable=&quot;on&quot;,n.currentTarget.onselectstart=function(){return!1},n.currentTarget.style&amp;&amp;(n.currentTarget.style.MozUserSelect=&quot;none&quot;)}catch(r){}return t.init_x=n.pageX,t.init_y=n.pageY,t.data=s,t.is_down=!0,t.element=n.currentTarget,a!==!1&amp;&amp;(t.helper=e(&quot;&lt;div id=&#39;vakata-dnd&#39;&gt;&lt;/div&gt;&quot;).html(a).css({display:&quot;block&quot;,margin:&quot;0&quot;,padding:&quot;0&quot;,position:&quot;absolute&quot;,top:&quot;-2000px&quot;,lineHeight:&quot;16px&quot;,zIndex:&quot;10000&quot;})),e(document).bind(&quot;mousemove&quot;,e.vakata.dnd.drag),e(document).bind(&quot;mouseup&quot;,e.vakata.dnd.stop),!1},drag:function(n){if(t.is_down){if(!t.is_drag){if(!(Math.abs(n.pageX-t.init_x)&gt;e.vakata.dnd.settings.threshold||Math.abs(n.pageY-t.init_y)&gt;e.vakata.dnd.settings.threshold))return;t.helper&amp;&amp;(t.helper.appendTo(&quot;body&quot;),t.helper_w=t.helper.outerWidth()),t.is_drag=!0,e.vakata.dnd._trigger(&quot;start&quot;,n)}var s=!1,a=!1,r=!1,i=!1,o=!1,l=!1,c=!1,d=!1,h=!1,u=!1;t.scroll_t=0,t.scroll_l=0,t.scroll_e=!1,e(n.target).parentsUntil(&quot;body&quot;).addBack().vakata_reverse().filter(function(){return/^auto|scroll$/.test(e(this).css(&quot;overflow&quot;))&amp;&amp;(this.scrollHeight&gt;this.offsetHeight||this.scrollWidth&gt;this.offsetWidth)}).each(function(){var s=e(this),a=s.offset();return this.scrollHeight&gt;this.offsetHeight&amp;&amp;(a.top+s.height()-n.pageY&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_t=1),n.pageY-a.top&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_t=-1)),this.scrollWidth&gt;this.offsetWidth&amp;&amp;(a.left+s.width()-n.pageX&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_l=1),n.pageX-a.left&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_l=-1)),t.scroll_t||t.scroll_l?(t.scroll_e=e(this),!1):void 0}),t.scroll_e||(s=e(document),a=e(window),r=s.height(),i=a.height(),o=s.width(),l=a.width(),c=s.scrollTop(),d=s.scrollLeft(),r&gt;i&amp;&amp;n.pageY-c&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_t=-1),r&gt;i&amp;&amp;i-(n.pageY-c)&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_t=1),o&gt;l&amp;&amp;n.pageX-d&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_l=-1),o&gt;l&amp;&amp;l-(n.pageX-d)&lt;e.vakata.dnd.settings.scroll_proximity&amp;&amp;(t.scroll_l=1),(t.scroll_t||t.scroll_l)&amp;&amp;(t.scroll_e=s)),t.scroll_e&amp;&amp;e.vakata.dnd._scroll(!0),t.helper&amp;&amp;(h=parseInt(n.pageY+e.vakata.dnd.settings.helper_top,10),u=parseInt(n.pageX+e.vakata.dnd.settings.helper_left,10),r&amp;&amp;h+25&gt;r&amp;&amp;(h=r-50),o&amp;&amp;u+t.helper_w&gt;o&amp;&amp;(u=o-(t.helper_w+2)),t.helper.css({left:u+&quot;px&quot;,top:h+&quot;px&quot;})),e.vakata.dnd._trigger(&quot;move&quot;,n)}},stop:function(n){t.is_drag&amp;&amp;e.vakata.dnd._trigger(&quot;stop&quot;,n),e.vakata.dnd._clean()}}}(jQuery),function(e){e.jstree.defaults.html={data:!1,ajax:!1},e.jstree.plugins.html=function(t,n){this.append_html_data=function(t,n){return n=e(n),t=this.get_node(t),n&amp;&amp;n.length&amp;&amp;n.is(&quot;ul, li&quot;)?(-1===t&amp;&amp;(t=this.element),t.length?(t.children(&quot;ul&quot;).length||t.append(&quot;&lt;ul /&gt;&quot;),t.children(&quot;ul&quot;).empty().append(n.is(&quot;ul&quot;)?n.children(&quot;li&quot;):n),!0):!1):(t&amp;&amp;-1!==t&amp;&amp;t.is(&quot;li&quot;)&amp;&amp;t.removeClass(&quot;jstree-closed&quot;).addClass(&quot;jstree-leaf&quot;).children(&quot;ul&quot;).remove(),!0)},this._load_node=function(t,s){var a=e.extend(!0,{},this.settings.html);if(t=this.get_node(t),!t)return!1;switch(!0){case!a.data&amp;&amp;!a.ajax:return n._load_node.call(this,t,s);case e.isFunction(a.data):return a.data.call(this,t,e.proxy(function(e){return s.call(this,this._append_html_data(t,e))},this));case!!a.data&amp;&amp;!a.ajax||!!a.data&amp;&amp;!!a.ajax&amp;&amp;-1===t:return s.call(this,this._append_html_data(t,a.data));case!a.data&amp;&amp;!!a.ajax||!!a.data&amp;&amp;!!a.ajax&amp;&amp;-1!==t:return a.ajax.success=e.proxy(function(n,a,r){var i=this.settings.html.ajax;e.isFunction(i.success)&amp;&amp;(n=i.success.call(this,n,a,r)||n),s.call(this,this._append_html_data(t,n))},this),a.ajax.error=e.proxy(function(t,n,a){var r=this.settings.html.ajax;e.isFunction(r.error)&amp;&amp;r.error.call(this,t,n,a),s.call(this,!1)},this),a.ajax.dataType||(a.ajax.dataType=&quot;html&quot;),e.isFunction(a.ajax.url)&amp;&amp;(a.ajax.url=a.ajax.url.call(this,t)),e.isFunction(a.ajax.data)&amp;&amp;(a.ajax.data=a.ajax.data.call(this,t)),e.ajax(a.ajax)}}},e.jstree.defaults.plugins.push(&quot;html&quot;)}(jQuery),function(e){e.jstree.defaults.json={data:!1,ajax:!1,progressive_render:!1,progressive_unload:!1},e.jstree.plugins.json=function(t,n){this.bind=function(){n.bind.call(this),this.element.bind(&quot;ready.jstree&quot;,e.proxy(function(){this.element.bind(&quot;after_close.jstree&quot;,e.proxy(function(t,n){var s=e(n.node);this.settings.json.progressive_unload&amp;&amp;0===s.find(&quot;.jstree-clicked:eq(0)&quot;).length&amp;&amp;(s.data(&quot;jstree&quot;).children=this.get_json(s)[0].children,s.children(&quot;ul&quot;).remove())},this))},this))},this.parse_json=function(t){var s=this.settings.json;return s.progressive_render&amp;&amp;e.isArray(t.children)&amp;&amp;!this._json_has_selected(t.children)&amp;&amp;(t.data||(t.data={}),t.data.jstree||(t.data.jstree={}),t.data.jstree.children=t.children,t.children=!0),n.parse_json.call(this,t)},this._json_has_selected=function(e){for(var t=!1,n=0,s=e.length;s&gt;n&amp;&amp;(t=e[n].data&amp;&amp;e[n].data.jstree&amp;&amp;e[n].data.jstree.selected?!0:e[n].children?t||this._json_has_selected(e[n].children):!1,t!==!0);n++);return t},this._append_json_data=function(e,t){return e=this.get_node(e),-1===e&amp;&amp;(e=this.element),t=this.parse_json(t),e.length?t?(e.children(&quot;ul&quot;).length||e.append(&quot;&lt;ul /&gt;&quot;),e.children(&quot;ul&quot;).empty().append(t.is(&quot;li&quot;)?t:t.children(&quot;li&quot;)),!0):(e&amp;&amp;e.is(&quot;li&quot;)&amp;&amp;e.removeClass(&quot;jstree-closed&quot;).addClass(&quot;jstree-leaf&quot;).children(&quot;ul&quot;).remove(),!0):!1},this._load_node=function(t,s){var a=!1,r=e.extend(!0,{},this.settings.json);if(t=this.get_node(t),!t)return!1;switch(!0){case-1===t&amp;&amp;this.get_container().data(&quot;jstree&quot;)&amp;&amp;e.isArray(this.get_container().data(&quot;jstree&quot;).children):return a=this.element.data(&quot;jstree&quot;).children,this.get_container().data(&quot;jstree&quot;).children=null,s.call(this,this._append_json_data(t,a));case-1!==t&amp;&amp;t.length&amp;&amp;t.data(&quot;jstree&quot;)&amp;&amp;e.isArray(t.data(&quot;jstree&quot;).children):return a=t.data(&quot;jstree&quot;).children,t.data(&quot;jstree&quot;).children=null,s.call(this,this._append_json_data(t,a));case!r.data&amp;&amp;!r.ajax:return n._load_node.call(this,t,s);case e.isFunction(r.data):return r.data.call(this,t,e.proxy(function(e){return s.call(this,this._append_json_data(t,e))},this));case!!r.data&amp;&amp;!r.ajax||!!r.data&amp;&amp;!!r.ajax&amp;&amp;-1===t:return s.call(this,this._append_json_data(t,r.data));case!r.data&amp;&amp;!!r.ajax||!!r.data&amp;&amp;!!r.ajax&amp;&amp;-1!==t:return r.ajax.success=e.proxy(function(n,a,r){var i=this.settings.json.ajax;e.isFunction(i.success)&amp;&amp;(n=i.success.call(this,n,a,r)||n),s.call(this,this._append_json_data(t,n))},this),r.ajax.error=e.proxy(function(t,n,a){var r=this.settings.json.ajax;e.isFunction(r.error)&amp;&amp;r.error.call(this,t,n,a),s.call(this,!1)},this),r.ajax.dataType||(r.ajax.dataType=&quot;json&quot;),e.isFunction(r.ajax.url)&amp;&amp;(r.ajax.url=r.ajax.url.call(this,t)),e.isFunction(r.ajax.data)&amp;&amp;(r.ajax.data=r.ajax.data.call(this,t)),e.ajax(r.ajax)}}},e.jstree.defaults.plugins.push(&quot;json&quot;)}(jQuery),function(e){e.jstree.defaults.rules={check_max_depth:!0,check_max_children:!0,check_valid_children:!0,types:{}},e.jstree.plugins.rules=function(t,n){this.bind=function(){n.bind.call(this),this.element.on(&quot;load_node.jstree&quot;,e.proxy(function(e,t){if(this.settings.rules.check_max_depth){var n=-1===t.node?this.element:t.node,s=this,a=function(){s.apply_max_depth(this)&amp;&amp;(n=n.not(this))};if(!this.apply_max_depth(n))for(;n.length;)n=n.children(&quot;ul&quot;).children(&quot;li&quot;),n.each(a)}},this))},this.apply_max_depth=function(t){if(t=this.get_node(t),!t||!t.length)return!1;t=-1===t?this.element:t;var n=t.data(&quot;jstree&quot;),s={},a=function(){s=e(this).data(&quot;jstree&quot;)||{},s.max_depth=0,e(this).data(&quot;jstree&quot;,s)},r=function(){s=e(this).data(&quot;jstree&quot;)||{},s.max_depth=s.max_depth&amp;&amp;-1!==s.max_depth?Math.min(s.max_depth,n):n,e(this).data(&quot;jstree&quot;,s)};if(n&amp;&amp;n.max_depth!==void 0&amp;&amp;-1!==n.max_depth){for(n=n.max_depth;t.length&gt;0;){if(t=t.children(&quot;ul&quot;).children(&quot;li&quot;),n=Math.max(n-1,0),0===n){t.find(&quot;li&quot;).addBack().each(a);break}t.each(r)}return!0}return!1},this.get_rules=function(e){if(e=this.get_node(e),-1===e)return e=this.element,e=e.data(&quot;jstree&quot;),{type:!1,max_depth:e&amp;&amp;e.max_depth?e.max_depth:-1,max_children:e&amp;&amp;e.max_children?e.max_children:-1,valid_children:e&amp;&amp;e.valid_children?e.valid_children:-1};if(!e||!e.length)return!1;</div><div class='line' id='LC4'>var t=this.settings.rules,n=this.get_type(e),s={type:n,max_depth:-1,max_children:-1,valid_children:-1};return e=e.data(&quot;jstree&quot;),n&amp;&amp;t[n]&amp;&amp;(t[n].max_depth&amp;&amp;(s.max_depth=t[n].max_depth),t[n].max_children&amp;&amp;(s.max_children=t[n].max_children),t[n].valid_children&amp;&amp;(s.valid_children=t[n].valid_children)),e&amp;&amp;e.max_children!==void 0&amp;&amp;(s.max_children=e.max_children),e&amp;&amp;e.valid_children!==void 0&amp;&amp;(s.valid_children=e.valid_children),e&amp;&amp;e.max_depth!==void 0&amp;&amp;(-1===s.max_depth||-1!==e.max_depth&amp;&amp;e.max_depth&lt;s.max_depth)&amp;&amp;(s.max_depth=e.max_depth),s},this.get_type=function(e){return e=this.get_node(e),-1===e&amp;&amp;(e=this.element),e&amp;&amp;e.length?(e=e.data(&quot;jstree&quot;),e&amp;&amp;e.type?e.type:!1):!1},this.set_type=function(e,t){if(e=this.get_node(e),-1===e&amp;&amp;(e=this.element),!e||!e.length)return!1;var n=e.data(&quot;jstree&quot;);return n||(n={}),n.type=t,e.data(&quot;jstree&quot;,n),!0},this.check=function(t,s,a,r){if(n.check.call(this,t,s,a,r)===!1)return!1;var i=!1,o=this.settings.rules,l=this,c=0;switch(t){case&quot;create_node&quot;:case&quot;move_node&quot;:case&quot;copy_node&quot;:if(!(o.check_max_children||o.check_valid_children||o.check_max_depth))return!0;if(i=this.get_rules(a),o.check_max_children&amp;&amp;i.max_children!==void 0&amp;&amp;-1!==i.max_children&amp;&amp;a.children(&quot;ul&quot;).children(&quot;li&quot;).not(&quot;move_node&quot;===t?s:null).length+s.length&gt;i.max_children)return!1;if(o.check_valid_children&amp;&amp;i.valid_children!==void 0&amp;&amp;-1!==i.valid_children){if(!e.isArray(i.valid_children))return!1;if(s.each(function(){return-1===e.inArray(l.get_type(this),i.valid_children)?(l=!1,!1):void 0}),l===!1)return!1}if(o.check_max_depth&amp;&amp;-1!==i.max_depth){c=0;do c++,s=s.children(&quot;ul&quot;).children(&quot;li&quot;);while(s.length&amp;&amp;&quot;create_node&quot;!==t);if(0&gt;i.max_depth-c)return!1}}return!0}},e.jstree.defaults.plugins.push(&quot;rules&quot;)}(jQuery),function(e){e.jstree.defaults.search={ajax:!1,case_sensitive:!1,show_only_matches:!0},e.jstree.plugins.search=function(t,n){this.bind=function(){n.bind.call(this),this._data.search.str=&quot;&quot;,this._data.search.res=e(),this.settings.search.show_only_matches&amp;&amp;this.element.on(&quot;search.jstree&quot;,function(t,n){n.nodes.length&amp;&amp;(e(this).children(&quot;ul&quot;).find(&quot;li&quot;).hide().removeClass(&quot;jstree-last&quot;),n.nodes.parentsUntil(&quot;.jstree&quot;).addBack().show().filter(&quot;ul&quot;).each(function(){e(this).children(&quot;li:visible&quot;).eq(-1).addClass(&quot;jstree-last&quot;)}))}).on(&quot;clear_search.jstree&quot;,function(t,n){n.nodes.length&amp;&amp;e(this).children(&quot;ul&quot;).find(&quot;li&quot;).css(&quot;display&quot;,&quot;&quot;).end().end().jstree(&quot;correct_node&quot;,-1,!0)})},this.search=function(t,n){if(t===!1||&quot;&quot;===e.trim(t))return this.clear_search();var s=this.settings.search,a=this;return!n&amp;&amp;s.ajax!==!1&amp;&amp;this.get_container_ul().find(&quot;li.jstree-closed:not(:has(ul)):eq(0)&quot;).length&gt;0?(s.ajax.success=e.proxy(function(n,s,a){var r=this.settings.search.ajax;e.isFunction(r.success)&amp;&amp;(n=r.success.call(this,n,s,a)||n),this._search_open(n,t)},this),s.ajax.error=e.proxy(function(t,n,s){var a=this.settings.search.ajax;e.isFunction(a.error)&amp;&amp;a.error.call(this,t,n,s)},this),s.ajax.dataType||(s.ajax.dataType=&quot;json&quot;),e.isFunction(s.ajax.url)&amp;&amp;(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)?s.ajax.data=s.ajax.data.call(this,t):(s.ajax.data||(s.ajax.data={}),s.ajax.data.str=t),e.ajax(s.ajax),void 0):(this._data.search.res.length&amp;&amp;this.clear_search(),this._data.search.str=t,this._data.search.res=this._search(t),this._data.search.res.addClass(&quot;jstree-search&quot;).parent().parentsUntil(&quot;.jstree&quot;,&quot;.jstree-closed&quot;).each(function(){a.open_node(this,!1,0)}),this.trigger(&quot;search&quot;,{nodes:this._data.search.res,str:t}),void 0)},this.clear_search=function(){this._data.search.res.removeClass(&quot;jstree-search&quot;),this.trigger(&quot;clear_search&quot;,{nodes:this._data.search.res,str:this._data.search.str}),this._data.search.str=&quot;&quot;,this._data.search.res=e()},this._search=function(t){return t=this.settings.search.case_sensitive?t:t.toLowerCase(),this.settings.json&amp;&amp;this.settings.json.progressive_render&amp;&amp;this.get_container_ul().find(&quot;li.jstree-closed:not(:has(ul))&quot;).each(e.proxy(function(n,s){this._search_data(t,e(s).data(&quot;jstree&quot;))&amp;&amp;this.open_node(s,!1,0)},this)),this.element.find(&quot;.jstree-anchor:&quot;+(this.settings.search.case_sensitive?&quot;contains&quot;:&quot;vakata_icontains&quot;)+&quot;(&quot;+t+&quot;)&quot;)},this._search_data=function(t,n){if(!n||!n.children||!e.isArray(n.children))return!1;var s=!1;return e.each(n.children,e.proxy(function(e,a){var r,i=&quot;string&quot;==typeof a?a:a.title;i=this.settings.search.case_sensitive?i:i.toLowerCase(),r=-1!==i.indexOf(t)||this._search_data(t,a),r&amp;&amp;(n.data||(n.data={}),n.data.jstree||(n.data.jstree={}),n.data.jstree.opened=!0),s=s||r},this)),s},this._search_open=function(t,n){var s=!0,a=this;e.each(t.concat([]),function(r,i){i=document.getElementById(i),i&amp;&amp;(a.is_loaded(i)?(a.is_closed(i)&amp;&amp;a.open_node(i,!1,0),e.vakata.array_remove(t,r)):(a.is_loading(i)||a.open_node(i,e.proxy(function(){this._search_open(t,n)},a),0),s=!1))}),s&amp;&amp;this.search(n,!0)}},e.expr[&quot;:&quot;].vakata_icontains=e.expr.createPseudo(function(e){return function(t){return(t.textContent||t.innerText||&quot;&quot;).toLowerCase().indexOf(e.toLowerCase())&gt;=0}}),e.jstree.defaults.plugins.push(&quot;search&quot;)}(jQuery),function(e){e.jstree.defaults.sort=function(e,t){return this.get_text(e,!0)&gt;this.get_text(t,!0)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on(&quot;load_node.jstree&quot;,e.proxy(function(e,t){var n=this.get_node(t.node);n=-1===n?this.get_container_ul():n.children(&quot;ul&quot;),this.sort(n,!0)},this)).on(&quot;rename_node.jstree create_node.jstree&quot;,e.proxy(function(e,t){this.sort(t.node.parent(),!1)},this)).on(&quot;move_node.jstree copy_node.jstree&quot;,e.proxy(function(e,t){var n=-1===t.parent?this.get_container_ul():t.parent.children(&quot;ul&quot;);this.sort(n,!1)},this))},this.sort=function(t,n){var s=this.settings.sort,a=this;t.append(e.makeArray(t.children(&quot;li&quot;)).sort(e.proxy(s,a))),t.children(&quot;li&quot;).each(function(){a.correct_node(this,!1)}),n&amp;&amp;(t.children(&quot;li&quot;).children(&quot;ul&quot;).each(function(){a.sort(e(this))}),a.correct_node(t.children(&quot;li&quot;),!0))}},e.jstree.defaults.plugins.push(&quot;sort&quot;)}(jQuery),function(e){var t=!1;e.jstree.defaults.state={key:&quot;jstree&quot;,events:&quot;changed.jstree open_node.jstree close_node.jstree&quot;,ttl:!1},e.jstree.plugins.state=function(n,s){this.bind=function(){s.bind.call(this),this.element.on(&quot;ready.jstree&quot;,e.proxy(function(){this.element.one(&quot;restore_state.jstree set_state.jstree&quot;,e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){t&amp;&amp;clearTimeout(t),t=setTimeout(e.proxy(function(){this.save_state()},this),100)},this))},this)),this.restore_state()},this))},this.save_state=function(){e.vakata.storage.set(this.settings.state.key,this.get_state(),this.settings.state.ttl)},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);t&amp;&amp;this.set_state(t),this.trigger(&quot;restore_state&quot;,{state:t})},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}}}(jQuery),function(e,t,n){var s=function(e){return e},a=function(e){return decodeURIComponent(e.replace(/\+/g,&quot; &quot;))},r=e.vakata.cookie=function(i,o,l){if(o!==n){if(l=e.extend({},r.defaults,l),null===o&amp;&amp;(l.expires=-1),&quot;number&quot;==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setDate(d.getDate()+c)}return o=r.json?e.vakata.json.encode(o):o+&quot;&quot;,t.cookie=[encodeURIComponent(i),&quot;=&quot;,r.raw?o:encodeURIComponent(o),l.expires?&quot;; expires=&quot;+l.expires.toUTCString():&quot;&quot;,l.path?&quot;; path=&quot;+l.path:&quot;&quot;,l.domain?&quot;; domain=&quot;+l.domain:&quot;&quot;,l.secure?&quot;; secure&quot;:&quot;&quot;].join(&quot;&quot;)}for(var h=r.raw?s:a,u=t.cookie.split(&quot;; &quot;),_=0,p=u.length;p&gt;_;_++){var g=u[_].split(&quot;=&quot;);if(h(g.shift())===i){var f=h(g.join(&quot;=&quot;));return r.json?e.vakata.json.decode(f):f}}return null};r.defaults={},e.vakata.removeCookie=function(t,n){return null!==e.cookie(t)?(e.cookie(t,null,n),!0):!1}}(jQuery,document),function(e){function t(){var t=!1;if(&quot;localStorage&quot;in window)try{window.localStorage.setItem(&quot;_tmptest&quot;,&quot;tmpval&quot;),t=!0,window.localStorage.removeItem(&quot;_tmptest&quot;)}catch(s){}if(t)try{window.localStorage&amp;&amp;(o=window.localStorage,u=&quot;localStorage&quot;)}catch(a){}else if(&quot;globalStorage&quot;in window)try{window.globalStorage&amp;&amp;(o=window.globalStorage[window.location.hostname],u=&quot;globalStorage&quot;)}catch(i){}else{if(l=document.createElement(&quot;link&quot;),l.addBehavior){l.style.behavior=&quot;url(#default#userData)&quot;,document.getElementsByTagName(&quot;head&quot;)[0].appendChild(l);try{l.load(&quot;jStorage&quot;);var c=&quot;{}&quot;;c=l.getAttribute(&quot;jStorage&quot;),o.jStorage=c,u=&quot;userDataBehavior&quot;}catch(d){}}if(!u&amp;&amp;(e.vakata.cookie(&quot;__vjstorage&quot;)||e.vakata.cookie(&quot;__vjstorage&quot;,&quot;{}&quot;,{expires:365})&amp;&amp;&quot;{}&quot;===e.vakata.cookie(&quot;__vjstorage&quot;))&amp;&amp;(l=null,o.jStorage=e.vakata.cookie(&quot;__vjstorage&quot;),u=&quot;cookie&quot;),!u)return l=null,void 0}n(),r()}function n(){if(o.jStorage)try{i=h(o.jStorage+&quot;&quot;)}catch(e){o.jStorage=&quot;{}&quot;}else o.jStorage=&quot;{}&quot;;c=o.jStorage?(o.jStorage+&quot;&quot;).length:0}function s(){try{o.jStorage=d(i),&quot;userDataBehavior&quot;===u&amp;&amp;(l.setAttribute(&quot;jStorage&quot;,o.jStorage),l.save(&quot;jStorage&quot;)),&quot;cookie&quot;===u&amp;&amp;e.vakata.cookie(&quot;__vjstorage&quot;,o.jStorage,{expires:365}),c=o.jStorage?(o.jStorage+&quot;&quot;).length:0}catch(t){}}function a(e){if(!e||&quot;string&quot;!=typeof e&amp;&amp;&quot;number&quot;!=typeof e)throw new TypeError(&quot;Key name must be string or numeric&quot;);if(&quot;__jstorage_meta&quot;===e)throw new TypeError(&quot;Reserved key name&quot;);return!0}function r(){var e,t,n=+new Date,a=1/0,o=!1;if(_!==!1&amp;&amp;clearTimeout(_),i.__jstorage_meta&amp;&amp;&quot;object&quot;==typeof i.__jstorage_meta.TTL){t=i.__jstorage_meta.TTL;for(e in t)t.hasOwnProperty(e)&amp;&amp;(n&gt;=t[e]?(delete t[e],delete i[e],o=!0):a&gt;t[e]&amp;&amp;(a=t[e]));1/0!==a&amp;&amp;(_=setTimeout(r,a-n)),o&amp;&amp;s()}}var i={},o={jStorage:&quot;{}&quot;},l=null,c=0,d=e.vakata.json.encode,h=e.vakata.json.decode,u=!1,_=!1;e.vakata.storage={version:&quot;0.3.0&quot;,set:function(t,n,r){return a(t),&quot;object&quot;==typeof n&amp;&amp;(n=h(d(n))),i[t]=n,s(),r&amp;&amp;parseInt(r,10)&amp;&amp;e.vakata.storage.setTTL(t,parseInt(r,10)),n},get:function(e,t){return a(e),e in i?i[e]:t===void 0?null:t},del:function(e){return a(e),e in i?(delete i[e],i.__jstorage_meta&amp;&amp;&quot;object&quot;==typeof i.__jstorage_meta.TTL&amp;&amp;e in i.__jstorage_meta.TTL&amp;&amp;delete i.__jstorage_meta.TTL[e],s(),!0):!1},setTTL:function(e,t){var n=+new Date;return a(e),t=Number(t)||0,e in i?(i.__jstorage_meta||(i.__jstorage_meta={}),i.__jstorage_meta.TTL||(i.__jstorage_meta.TTL={}),t&gt;0?i.__jstorage_meta.TTL[e]=n+t:delete i.__jstorage_meta.TTL[e],s(),r(),!0):!1},getTTL:function(e){var t,n=+new Date;return a(e),e in i&amp;&amp;i.__jstorage_meta.TTL&amp;&amp;i.__jstorage_meta.TTL[e]?(t=i.__jstorage_meta.TTL[e]-n,t||0):0},flush:function(){return i={},s(),!0},storageObj:function(){return e.extend(!0,{},i)},index:function(){var t=[];return e.each(i,function(e){&quot;__jstorage_meta&quot;!==e&amp;&amp;t.push(e)}),t},storageSize:function(){return c},currentBackend:function(){return u},storageAvailable:function(){return!!u}},t()}(jQuery),function(e){e.jstree.plugins.unique=function(t,n){this.check=function(t,s,a,r){if(n.check.call(this,t,s,a,r)===!1)return!1;a=-1===a?this.element:a;var i=&quot;rename_node&quot;===t?e(&quot;&lt;div /&gt;&quot;).html(r).text():this.get_text(s,!0),o=[],l=this;switch(a.children(&quot;ul&quot;).children(&quot;li&quot;).each(function(){o.push(l.get_text(this,!0))}),t){case&quot;delete_node&quot;:return!0;case&quot;rename_node&quot;:case&quot;copy_node&quot;:return-1===e.inArray(i,o);case&quot;move_node&quot;:return-1!==a.children(&quot;ul&quot;).children(&quot;li&quot;).index(s)||-1===e.inArray(i,o)}return!0}},e.jstree.defaults.plugins.push(&quot;unique&quot;)}(jQuery),function(e){e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on(&quot;ready.jstree set_state.jstree&quot;,e.proxy(function(){this.hide_dots()},this)).on(&quot;ready.jstree&quot;,e.proxy(function(){this.get_container_ul().addClass(&quot;jstree-wholerow-ul&quot;)},this)).on(&quot;deselect_all.jstree&quot;,e.proxy(function(){this.element.find(&quot;.jstree-wholerow-clicked&quot;).removeClass(&quot;jstree-wholerow-clicked&quot;)},this)).on(&quot;changed.jstree &quot;,e.proxy(function(e,t){this.element.find(&quot;.jstree-wholerow-clicked&quot;).removeClass(&quot;jstree-wholerow-clicked&quot;),t.selected.children(&quot;.jstree-wholerow&quot;).addClass(&quot;jstree-wholerow-clicked&quot;)},this)).on(&quot;hover_node.jstree dehover_node.jstree&quot;,e.proxy(function(t,n){this.element.find(&quot;.jstree-wholerow-hovered&quot;).removeClass(&quot;jstree-wholerow-hovered&quot;),&quot;hover_node&quot;===t.type&amp;&amp;n.node.each(function(){e(this).children(&quot;.jstree-wholerow&quot;).addClass(&quot;jstree-wholerow-hovered&quot;)})},this)).on(&quot;contextmenu.jstree&quot;,&quot;.jstree-wholerow&quot;,e.proxy(function(t){this._data.contextmenu!==void 0&amp;&amp;(t.preventDefault(),e(t.currentTarget).closest(&quot;li&quot;).children(&quot;a:eq(0)&quot;).trigger(&quot;contextmenu&quot;,t))},this)).on(&quot;click.jstree&quot;,&quot;.jstree-wholerow&quot;,function(t){t.stopImmediatePropagation(),e(t.currentTarget).closest(&quot;li&quot;).children(&quot;a:eq(0)&quot;).trigger(&quot;click&quot;,t)}).on(&quot;click.jstree&quot;,&quot;.jstree-leaf &gt; .jstree-ocl&quot;,e.proxy(function(t){t.stopImmediatePropagation(),e(t.currentTarget).closest(&quot;li&quot;).children(&quot;a:eq(0)&quot;).trigger(&quot;click&quot;,t)},this)).on(&quot;mouseover.jstree&quot;,&quot;li&quot;,e.proxy(function(t){return t.stopImmediatePropagation(),e(t.currentTarget).closest(&quot;li&quot;).children(&quot;.jstree-hovered, .jstree-clicked&quot;).length?!1:(this.hover_node(t.currentTarget),!1)},this)).on(&quot;mouseleave.jstree&quot;,&quot;li&quot;,e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.element.find(&quot;.jstree-wholerow&quot;).remove(),n.teardown.call(this)},this.clean_node=function(t){t=n.clean_node.call(this,t);var s=this;return t.each(function(){var t=e(this);t.children(&quot;.jstree-wholerow&quot;).length||t.prepend(&quot;&lt;div class=&#39;jstree-wholerow&#39; style=&#39;position:absolute; height:&quot;+s._data.core.li_height+&quot;px;&#39; unselectable=&#39;on&#39;&gt;&amp;#160;&lt;/div&gt;&quot;)})}},e(function(){var t=&quot;.jstree .jstree-wholerow-ul { position:relative; display:inline-block; min-width:100%; }.jstree-wholerow-ul li &gt; a, .jstree-wholerow-ul li &gt; i { position:relative; }.jstree-wholerow-ul .jstree-wholerow { width:100%; cursor:pointer; position:absolute; left:0; user-select:none;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; }&quot;;e.jstree.no_css||e(&quot;head&quot;).append(&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;+t+&quot;&lt;/style&gt;&quot;)})}(jQuery),function(e){var t={nest:&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; &gt;&lt;xsl:output method=&quot;html&quot; encoding=&quot;utf-8&quot; omit-xml-declaration=&quot;yes&quot; standalone=&quot;no&quot; indent=&quot;no&quot; media-type=&quot;text/html&quot; /&gt;&lt;xsl:template match=&quot;/&quot;&gt;	&lt;xsl:call-template name=&quot;nodes&quot;&gt;		&lt;xsl:with-param name=&quot;node&quot; select=&quot;/root&quot; /&gt;	&lt;/xsl:call-template&gt;&lt;/xsl:template&gt;&lt;xsl:template name=&quot;nodes&quot;&gt;	&lt;xsl:param name=&quot;node&quot; /&gt;	&lt;ul&gt;	&lt;xsl:for-each select=&quot;$node/item&quot;&gt;		&lt;xsl:variable name=&quot;children&quot; select=&quot;count(./item) &amp;gt; 0&quot; /&gt;		&lt;li&gt;			&lt;xsl:for-each select=&quot;@*&quot;&gt;&lt;xsl:attribute name=&quot;{name()}&quot;&gt;&lt;xsl:value-of select=&quot;.&quot; /&gt;&lt;/xsl:attribute&gt;&lt;/xsl:for-each&gt;			&lt;a&gt;				&lt;xsl:for-each select=&quot;./content/@*&quot;&gt;&lt;xsl:attribute name=&quot;{name()}&quot;&gt;&lt;xsl:value-of select=&quot;.&quot; /&gt;&lt;/xsl:attribute&gt;&lt;/xsl:for-each&gt;				&lt;xsl:copy-of select=&quot;./content/child::node()&quot; /&gt;			&lt;/a&gt;			&lt;xsl:if test=&quot;$children&quot;&gt;&lt;xsl:call-template name=&quot;nodes&quot;&gt;&lt;xsl:with-param name=&quot;node&quot; select=&quot;current()&quot; /&gt;&lt;/xsl:call-template&gt;&lt;/xsl:if&gt;		&lt;/li&gt;	&lt;/xsl:for-each&gt;	&lt;/ul&gt;&lt;/xsl:template&gt;&lt;/xsl:stylesheet&gt;&#39;,flat:&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; &gt;&lt;xsl:output method=&quot;html&quot; encoding=&quot;utf-8&quot; omit-xml-declaration=&quot;yes&quot; standalone=&quot;no&quot; indent=&quot;no&quot; media-type=&quot;text/xml&quot; /&gt;&lt;xsl:template match=&quot;/&quot;&gt;	&lt;ul&gt;	&lt;xsl:for-each select=&quot;//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]&quot;&gt;		&lt;xsl:call-template name=&quot;nodes&quot;&gt;			&lt;xsl:with-param name=&quot;node&quot; select=&quot;.&quot; /&gt;		&lt;/xsl:call-template&gt;	&lt;/xsl:for-each&gt;	&lt;/ul&gt;&lt;/xsl:template&gt;&lt;xsl:template name=&quot;nodes&quot;&gt;	&lt;xsl:param name=&quot;node&quot; /&gt;	&lt;xsl:variable name=&quot;children&quot; select=&quot;count(//item[@parent_id=$node/attribute::id]) &amp;gt; 0&quot; /&gt;	&lt;li&gt;		&lt;xsl:for-each select=&quot;@*&quot;&gt;			&lt;xsl:if test=&quot;name() != \&#39;parent_id\&#39;&quot;&gt;				&lt;xsl:attribute name=&quot;{name()}&quot;&gt;&lt;xsl:value-of select=&quot;.&quot; /&gt;&lt;/xsl:attribute&gt;			&lt;/xsl:if&gt;		&lt;/xsl:for-each&gt;		&lt;a&gt;			&lt;xsl:for-each select=&quot;./content/@*&quot;&gt;&lt;xsl:attribute name=&quot;{name()}&quot;&gt;&lt;xsl:value-of select=&quot;.&quot; /&gt;&lt;/xsl:attribute&gt;&lt;/xsl:for-each&gt;			&lt;xsl:copy-of select=&quot;./content/child::node()&quot; /&gt;		&lt;/a&gt;		&lt;xsl:if test=&quot;$children&quot;&gt;		&lt;ul&gt;			&lt;xsl:for-each select=&quot;//item[@parent_id=$node/attribute::id]&quot;&gt;				&lt;xsl:call-template name=&quot;nodes&quot;&gt;					&lt;xsl:with-param name=&quot;node&quot; select=&quot;.&quot; /&gt;				&lt;/xsl:call-template&gt;			&lt;/xsl:for-each&gt;		&lt;/ul&gt;		&lt;/xsl:if&gt;	&lt;/li&gt;&lt;/xsl:template&gt;&lt;/xsl:stylesheet&gt;&#39;},n=function(e){return(&quot;&quot;+e).replace(/&amp;/g,&quot;&amp;amp;&quot;).replace(/&lt;&#39;+&#39;/g,&quot;&amp;lt;&quot;).replace(/&gt;/g,&quot;&amp;gt;&quot;).replace(/&quot;/g,&quot;&amp;quot;&quot;).replace(/&#39;/g,&quot;&amp;apos;&quot;)};e.jstree.defaults.xml={xsl:&quot;flat&quot;,data:!1,ajax:!1},e.jstree.plugins.xml=function(s,a){this._append_xml_data=function(n,s){return s=e.vakata.xslt(s,t[this.settings.xml.xsl]),s===!1?!1:(s=e(s),n=this.get_node(n),s&amp;&amp;s.length&amp;&amp;s.is(&quot;ul, li&quot;)?(-1===n&amp;&amp;(n=this.element),n.length?(n.children(&quot;ul&quot;).length||n.append(&quot;&lt;ul /&gt;&quot;),n.children(&quot;ul&quot;).empty().append(s.is(&quot;ul&quot;)?s.children(&quot;li&quot;):s),!0):!1):(n&amp;&amp;-1!==n&amp;&amp;n.is(&quot;li&quot;)&amp;&amp;n.removeClass(&quot;jstree-closed&quot;).addClass(&quot;jstree-leaf&quot;).children(&quot;ul&quot;).remove(),!0))},this._load_node=function(t,n){var s=e.extend(!0,{},this.settings.xml);if(t=this.get_node(t),!t)return!1;switch(!0){case!s.data&amp;&amp;!s.ajax:return a._load_node.call(this,t,n);case e.isFunction(s.data):return s.data.call(this,t,e.proxy(function(e){return n.call(this,this._append_xml_data(t,e))},this));case!!s.data&amp;&amp;!s.ajax||!!s.data&amp;&amp;!!s.ajax&amp;&amp;-1===t:return n.call(this,this._append_xml_data(t,s.data));case!s.data&amp;&amp;!!s.ajax||!!s.data&amp;&amp;!!s.ajax&amp;&amp;-1!==t:return s.ajax.success=e.proxy(function(s,a,r){var i=this.settings.xml.ajax;e.isFunction(i.success)&amp;&amp;(s=i.success.call(this,s,a,r)||s),n.call(this,this._append_xml_data(t,s))},this),s.ajax.error=e.proxy(function(t,s,a){var r=this.settings.xml.ajax;e.isFunction(r.error)&amp;&amp;r.error.call(this,t,s,a),n.call(this,!1)},this),s.ajax.dataType||(s.ajax.dataType=&quot;xml&quot;),e.isFunction(s.ajax.url)&amp;&amp;(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&amp;&amp;(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}},this.get_xml=function(t,s,a){var r=&quot;&quot;;return t||(t=&quot;flat&quot;),a===void 0?(s=this.get_json(s),e.each(s,e.proxy(function(e,n){r+=this.get_xml(t,n,!0)},this)),&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;root&gt;&#39;+r+&quot;&lt;&quot;+&quot;/root&gt;&quot;):(r+=&quot;&lt;item&quot;,&quot;flat&quot;===t&amp;&amp;a!==!0&amp;&amp;(r+=&#39; parent_id=&quot;&#39;+n(a)+&#39;&quot;&#39;),s.data&amp;&amp;!e.isEmptyObject(s.data)&amp;&amp;e.each(s.data,function(t,s){e.isEmptyObject(s)||(r+=&quot; data-&quot;+t+&#39;=&quot;&#39;+n(e.vakata.json.encode(s))+&#39;&quot;&#39;)}),e.each(s.li_attr,function(e,t){r+=&quot; &quot;+e+&#39;=&quot;&#39;+n(t)+&#39;&quot;&#39;}),r+=&quot;&gt;&quot;,r+=&quot;&lt;content&quot;,e.each(s.a_attr,function(e,t){r+=&quot; &quot;+e+&#39;=&quot;&#39;+n(t)+&#39;&quot;&#39;}),r+=&quot;&gt;&lt;![CDATA[&quot;+s.title+&quot;]]&gt;&lt;&quot;+&quot;/content&gt;&quot;,&quot;flat&quot;===t&amp;&amp;(r+=&quot;&lt;/item&gt;&quot;),s.children&amp;&amp;e.each(s.children,e.proxy(function(e,n){r+=this.get_xml(t,n,s.li_attr&amp;&amp;s.li_attr.id?s.li_attr.id:!0)},this)),&quot;nest&quot;===t&amp;&amp;(r+=&quot;&lt;/item&gt;&quot;),r)}},e.jstree.defaults.plugins.push(&quot;xml&quot;),e.vakata.xslt=function(t,n){var s,a,r,i=!1,o=e.parseXML(t),l=e.parseXML(n);if(&quot;undefined&quot;!=typeof XSLTProcessor)return s=new XSLTProcessor,s.importStylesheet(l),i=s.transformToFragment(o,document),e(&quot;&lt;div /&gt;&quot;).append(i).html();if(o.transformNode!==void 0)return o.transformNode(l);if(window.ActiveXObject)try{i=new ActiveXObject(&quot;Msxml2.XSLTemplate&quot;),a=new ActiveXObject(&quot;Msxml2.DOMDocument&quot;),a.loadXML(t),r=new ActiveXObject(&quot;Msxml2.FreeThreadedDOMDocument&quot;),r.loadXML(n),i.stylesheet=r,s=i.createProcessor(),s.input=a,s.transform(),i=s.output}catch(c){}return i}}(jQuery);</div>
          </td>
        </tr>
      </table>
  </div>

          </div>
        </div>

        <a href="#jump-to-line" rel="facebox" data-hotkey="l" class="js-jump-to-line" style="display:none">Jump to Line</a>
        <div id="jump-to-line" style="display:none">
          <h2>Jump to Line</h2>
          <form accept-charset="UTF-8" class="js-jump-to-line-form">
            <input class="textfield js-jump-to-line-field" type="text">
            <div class="full-button">
              <button type="submit" class="button">Go</button>
            </div>
          </form>
        </div>

      </div>
    </div>
</div>

<div id="js-frame-loading-template" class="frame frame-loading large-loading-area" style="display:none;">
  <img class="js-frame-loading-spinner" src="https://a248.e.akamai.net/assets.github.com/images/spinners/octocat-spinner-128.gif?1347543527" height="64" width="64">
</div>


        </div>
      </div>
      <div class="context-overlay"></div>
    </div>

      <div id="footer-push"></div><!-- hack for sticky footer -->
    </div><!-- end of wrapper - hack for sticky footer -->

      <!-- footer -->
      <div id="footer">
  <div class="container clearfix">

      <dl class="footer_nav">
        <dt>GitHub</dt>
        <dd><a href="https://github.com/about">About us</a></dd>
        <dd><a href="https://github.com/blog">Blog</a></dd>
        <dd><a href="https://github.com/contact">Contact &amp; support</a></dd>
        <dd><a href="http://enterprise.github.com/">GitHub Enterprise</a></dd>
        <dd><a href="http://status.github.com/">Site status</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Applications</dt>
        <dd><a href="http://mac.github.com/">GitHub for Mac</a></dd>
        <dd><a href="http://windows.github.com/">GitHub for Windows</a></dd>
        <dd><a href="http://eclipse.github.com/">GitHub for Eclipse</a></dd>
        <dd><a href="http://mobile.github.com/">GitHub mobile apps</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Services</dt>
        <dd><a href="http://get.gaug.es/">Gauges: Web analytics</a></dd>
        <dd><a href="http://speakerdeck.com">Speaker Deck: Presentations</a></dd>
        <dd><a href="https://gist.github.com">Gist: Code snippets</a></dd>
        <dd><a href="http://jobs.github.com/">Job board</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>Documentation</dt>
        <dd><a href="http://help.github.com/">GitHub Help</a></dd>
        <dd><a href="http://developer.github.com/">Developer API</a></dd>
        <dd><a href="http://github.github.com/github-flavored-markdown/">GitHub Flavored Markdown</a></dd>
        <dd><a href="http://pages.github.com/">GitHub Pages</a></dd>
      </dl>

      <dl class="footer_nav">
        <dt>More</dt>
        <dd><a href="http://training.github.com/">Training</a></dd>
        <dd><a href="https://github.com/edu">Students &amp; teachers</a></dd>
        <dd><a href="http://shop.github.com">The Shop</a></dd>
        <dd><a href="/plans">Plans &amp; pricing</a></dd>
        <dd><a href="http://octodex.github.com/">The Octodex</a></dd>
      </dl>

      <hr class="footer-divider">


    <p class="right">&copy; 2013 <span title="0.07012s from fe16.rs.github.com">GitHub</span>, Inc. All rights reserved.</p>
    <a class="left" href="https://github.com/">
      <span class="mega-icon mega-icon-invertocat"></span>
    </a>
    <ul id="legal">
        <li><a href="https://github.com/site/terms">Terms of Service</a></li>
        <li><a href="https://github.com/site/privacy">Privacy</a></li>
        <li><a href="https://github.com/security">Security</a></li>
    </ul>

  </div><!-- /.container -->

</div><!-- /.#footer -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
          <div class="suggester-container">
              <div class="suggester fullscreen-suggester js-navigation-container" id="fullscreen_suggester"
                 data-url="/vakata/jstree/suggestions/commit">
              </div>
          </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped leftwards" title="Exit Zen Mode">
      <span class="mega-icon mega-icon-normalscreen"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped leftwards"
      title="Switch themes">
      <span class="mini-icon mini-icon-brightness"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="mini-icon mini-icon-exclamation"></span>
      Something went wrong with that request. Please try again.
      <a href="#" class="mini-icon mini-icon-remove-close ajax-error-dismiss"></a>
    </div>

    
    
    <span id='server_response_time' data-time='0.07063' data-host='fe16'></span>
    
  </body>
</html>

